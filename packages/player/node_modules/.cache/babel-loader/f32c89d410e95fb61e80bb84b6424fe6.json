{"ast":null,"code":"export const createNativeMediaStreamAudioSourceNodeFactory = createNativeAudioNode => {\n  return (nativeAudioContext, {\n    mediaStream\n  }) => {\n    const audioStreamTracks = mediaStream.getAudioTracks();\n    const nativeMediaStreamAudioSourceNode = createNativeAudioNode(nativeAudioContext, ntvDCntxt => {\n      /*\n       * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n       * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n       */\n      const filteredAudioStreamTracks = audioStreamTracks.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0).slice(0, 1);\n      return ntvDCntxt.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n    }); // Bug #63: Edge & Firefox do not expose the mediaStream yet.\n\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', {\n      value: mediaStream\n    });\n    return nativeMediaStreamAudioSourceNode;\n  };\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/standardized-audio-context/build/es2018/factories/native-media-stream-audio-source-node-factory.js"],"names":["createNativeMediaStreamAudioSourceNodeFactory","createNativeAudioNode","nativeAudioContext","mediaStream","audioStreamTracks","getAudioTracks","nativeMediaStreamAudioSourceNode","ntvDCntxt","filteredAudioStreamTracks","sort","a","b","id","slice","createMediaStreamSource","MediaStream","Object","defineProperty","value"],"mappings":"AAAA,OAAO,MAAMA,6CAA6C,GAAIC,qBAAD,IAA2B;AACpF,SAAO,CAACC,kBAAD,EAAqB;AAAEC,IAAAA;AAAF,GAArB,KAAyC;AAC5C,UAAMC,iBAAiB,GAAGD,WAAW,CAACE,cAAZ,EAA1B;AACA,UAAMC,gCAAgC,GAAGL,qBAAqB,CAACC,kBAAD,EAAsBK,SAAD,IAAe;AAC9F;;;;AAIA,YAAMC,yBAAyB,GAAGJ,iBAAiB,CAC9CK,IAD6B,CACxB,CAACC,CAAD,EAAIC,CAAJ,KAAYD,CAAC,CAACE,EAAF,GAAOD,CAAC,CAACC,EAAV,GAAgB,CAAC,CAAjB,GAAsBF,CAAC,CAACE,EAAF,GAAOD,CAAC,CAACC,EAAV,GAAgB,CAAhB,GAAoB,CAD5B,EAE7BC,KAF6B,CAEvB,CAFuB,EAEpB,CAFoB,CAAlC;AAGA,aAAON,SAAS,CAACO,uBAAV,CAAkC,IAAIC,WAAJ,CAAgBP,yBAAhB,CAAlC,CAAP;AACH,KAT6D,CAA9D,CAF4C,CAY5C;;AACAQ,IAAAA,MAAM,CAACC,cAAP,CAAsBX,gCAAtB,EAAwD,aAAxD,EAAuE;AAAEY,MAAAA,KAAK,EAAEf;AAAT,KAAvE;AACA,WAAOG,gCAAP;AACH,GAfD;AAgBH,CAjBM","sourcesContent":["export const createNativeMediaStreamAudioSourceNodeFactory = (createNativeAudioNode) => {\n    return (nativeAudioContext, { mediaStream }) => {\n        const audioStreamTracks = mediaStream.getAudioTracks();\n        const nativeMediaStreamAudioSourceNode = createNativeAudioNode(nativeAudioContext, (ntvDCntxt) => {\n            /*\n             * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n             * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n             */\n            const filteredAudioStreamTracks = audioStreamTracks\n                .sort((a, b) => ((a.id < b.id) ? -1 : (a.id > b.id) ? 1 : 0))\n                .slice(0, 1);\n            return ntvDCntxt.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n        });\n        // Bug #63: Edge & Firefox do not expose the mediaStream yet.\n        Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n//# sourceMappingURL=/build/es2018/factories/native-media-stream-audio-source-node-factory.js.map"]},"metadata":{},"sourceType":"module"}