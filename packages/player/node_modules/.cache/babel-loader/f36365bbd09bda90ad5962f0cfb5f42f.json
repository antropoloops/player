{"ast":null,"code":"// Bug #92: Edge does not respect the duration parameter yet.\nexport var createTestAudioBufferSourceNodeStartMethodDurationParameterSupport = function createTestAudioBufferSourceNodeStartMethodDurationParameterSupport(nativeOfflineAudioContextConstructor) {\n  return function () {\n    if (nativeOfflineAudioContextConstructor === null) {\n      return Promise.resolve(false);\n    }\n\n    var offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n    var audioBuffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\n    var audioBufferSourceNode = offlineAudioContext.createBufferSource();\n    audioBuffer.getChannelData(0)[0] = 1;\n    audioBufferSourceNode.buffer = audioBuffer;\n    audioBufferSourceNode.start(0, 0, 0);\n    audioBufferSourceNode.connect(offlineAudioContext.destination); // Bug #21: Safari does not support promises yet.\n\n    return new Promise(function (resolve) {\n      offlineAudioContext.oncomplete = function (_ref) {\n        var renderedBuffer = _ref.renderedBuffer;\n        // Bug #5: Safari does not support copyFromChannel().\n        resolve(renderedBuffer.getChannelData(0)[0] === 0);\n      };\n\n      offlineAudioContext.startRendering();\n    });\n  };\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/standardized-audio-context/build/es2018/factories/test-audio-buffer-source-node-start-method-duration-parameter-support.js"],"names":["createTestAudioBufferSourceNodeStartMethodDurationParameterSupport","nativeOfflineAudioContextConstructor","Promise","resolve","offlineAudioContext","audioBuffer","createBuffer","sampleRate","audioBufferSourceNode","createBufferSource","getChannelData","buffer","start","connect","destination","oncomplete","renderedBuffer","startRendering"],"mappings":"AAAA;AACA,OAAO,IAAMA,kEAAkE,GAAG,SAArEA,kEAAqE,CAACC,oCAAD,EAA0C;AACxH,SAAO,YAAM;AACT,QAAIA,oCAAoC,KAAK,IAA7C,EAAmD;AAC/C,aAAOC,OAAO,CAACC,OAAR,CAAgB,KAAhB,CAAP;AACH;;AACD,QAAMC,mBAAmB,GAAG,IAAIH,oCAAJ,CAAyC,CAAzC,EAA4C,CAA5C,EAA+C,KAA/C,CAA5B;AACA,QAAMI,WAAW,GAAGD,mBAAmB,CAACE,YAApB,CAAiC,CAAjC,EAAoC,CAApC,EAAuCF,mBAAmB,CAACG,UAA3D,CAApB;AACA,QAAMC,qBAAqB,GAAGJ,mBAAmB,CAACK,kBAApB,EAA9B;AACAJ,IAAAA,WAAW,CAACK,cAAZ,CAA2B,CAA3B,EAA8B,CAA9B,IAAmC,CAAnC;AACAF,IAAAA,qBAAqB,CAACG,MAAtB,GAA+BN,WAA/B;AACAG,IAAAA,qBAAqB,CAACI,KAAtB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC;AACAJ,IAAAA,qBAAqB,CAACK,OAAtB,CAA8BT,mBAAmB,CAACU,WAAlD,EAVS,CAWT;;AACA,WAAO,IAAIZ,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BC,MAAAA,mBAAmB,CAACW,UAApB,GAAiC,gBAAwB;AAAA,YAArBC,cAAqB,QAArBA,cAAqB;AACrD;AACAb,QAAAA,OAAO,CAACa,cAAc,CAACN,cAAf,CAA8B,CAA9B,EAAiC,CAAjC,MAAwC,CAAzC,CAAP;AACH,OAHD;;AAIAN,MAAAA,mBAAmB,CAACa,cAApB;AACH,KANM,CAAP;AAOH,GAnBD;AAoBH,CArBM","sourcesContent":["// Bug #92: Edge does not respect the duration parameter yet.\nexport const createTestAudioBufferSourceNodeStartMethodDurationParameterSupport = (nativeOfflineAudioContextConstructor) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const audioBuffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\n        const audioBufferSourceNode = offlineAudioContext.createBufferSource();\n        audioBuffer.getChannelData(0)[0] = 1;\n        audioBufferSourceNode.buffer = audioBuffer;\n        audioBufferSourceNode.start(0, 0, 0);\n        audioBufferSourceNode.connect(offlineAudioContext.destination);\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            offlineAudioContext.oncomplete = ({ renderedBuffer }) => {\n                // Bug #5: Safari does not support copyFromChannel().\n                resolve(renderedBuffer.getChannelData(0)[0] === 0);\n            };\n            offlineAudioContext.startRendering();\n        });\n    };\n};\n//# sourceMappingURL=/build/es2018/factories/test-audio-buffer-source-node-start-method-duration-parameter-support.js.map"]},"metadata":{},"sourceType":"module"}