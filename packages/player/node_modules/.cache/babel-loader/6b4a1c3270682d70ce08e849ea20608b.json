{"ast":null,"code":"import _slicedToArray from \"/Users/dani/Antropoloops/atpls-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/dani/Antropoloops/atpls-player/src/ui/Player/Player.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { autoUnlockAudio } from \"../../player/AudioContext\";\nimport { Spinner } from \"../shared/Spinner\";\nimport { useDeviceType } from \"../useDeviceType\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\n\nfunction useSession() {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isStarted = _useState2[0],\n        setStarted = _useState2[1];\n\n  return {\n    isStarted,\n    setStarted\n  };\n}\n\nexport const Player = ({\n  audioset\n}) => {\n  var _player$control;\n\n  const session = useSession();\n  const player = usePlayer(audioset);\n\n  const _useFullscreen = useFullscreen(),\n        isFullscreen = _useFullscreen.isFullscreen,\n        toggleFullscreen = _useFullscreen.toggleFullscreen;\n\n  const _useDeviceType = useDeviceType(),\n        isDesktop = _useDeviceType.isDesktop;\n\n  useKeyboardListener((_player$control = player.control) === null || _player$control === void 0 ? void 0 : _player$control.keyboard);\n  useEffect(() => {\n    autoUnlockAudio();\n  }, []);\n  const areVisualsVisible = isDesktop || player.isStarted;\n  const isSidebarVisible = !isFullscreen;\n  const showSpinner = player.isStarted && !player.clipsReady;\n  const showSession = !player.isStarted;\n  const showControl = true;\n\n  const Header = () => React.createElement(\"div\", {\n    className: \"Header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Hola!\");\n\n  return React.createElement(\"div\", {\n    className: \"App Player\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, isSidebarVisible && React.createElement(Sidebar, {\n    header: Header,\n    audioset: audioset,\n    onFullscreen: toggleFullscreen,\n    onStopAll: () => {\n      var _player$control2;\n\n      return player === null || player === void 0 ? void 0 : (_player$control2 = player.control) === null || _player$control2 === void 0 ? void 0 : _player$control2.stopAll(0);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, showSpinner && React.createElement(\"div\", {\n    className: \"spin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  })), showSession && React.createElement(Session, {\n    audioset: audioset,\n    isStarted: player.isStarted,\n    onStart: () => player.setStarted(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), showControl && React.createElement(Controller, {\n    audioset: audioset,\n    state: player.state,\n    control: player.isStarted ? player.control : undefined,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), areVisualsVisible && React.createElement(\"div\", {\n    className: \"visuals\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"visuals\",\n    ref: player.visualsRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/ui/Player/Player.tsx"],"names":["React","useEffect","useState","autoUnlockAudio","Spinner","useDeviceType","Controller","Session","Sidebar","useFullscreen","useKeyboardListener","usePlayer","useSession","isStarted","setStarted","Player","audioset","session","player","isFullscreen","toggleFullscreen","isDesktop","control","keyboard","areVisualsVisible","isSidebarVisible","showSpinner","clipsReady","showSession","showControl","Header","stopAll","state","undefined","visualsRef"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Audioset } from \"../../audioset\";\nimport { autoUnlockAudio } from \"../../player/AudioContext\";\nimport { Spinner } from \"../shared/Spinner\";\nimport { useDeviceType } from \"../useDeviceType\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\n\nexport interface PlayerProps {\n  audioset: Audioset;\n}\n\nfunction useSession() {\n  const [isStarted, setStarted] = useState(false);\n  return { isStarted, setStarted };\n}\n\nexport const Player = ({ audioset }: PlayerProps) => {\n  const session = useSession();\n  const player = usePlayer(audioset);\n  const { isFullscreen, toggleFullscreen } = useFullscreen();\n  const { isDesktop } = useDeviceType();\n  useKeyboardListener(player.control?.keyboard);\n\n  useEffect(() => {\n    autoUnlockAudio();\n  }, []);\n\n  const areVisualsVisible = isDesktop || player.isStarted;\n  const isSidebarVisible = !isFullscreen;\n\n  const showSpinner = player.isStarted && !player.clipsReady;\n  const showSession = !player.isStarted;\n  const showControl = true;\n\n  const Header = () => <div className=\"Header\">Hola!</div>;\n\n  return (\n    <div className=\"App Player\">\n      {isSidebarVisible && (\n        <Sidebar\n          header={Header}\n          audioset={audioset}\n          onFullscreen={toggleFullscreen}\n          onStopAll={() => player?.control?.stopAll(0)}\n        >\n          {showSpinner && (\n            <div className=\"spin\">\n              <Spinner />\n            </div>\n          )}\n          {showSession && (\n            <Session\n              audioset={audioset}\n              isStarted={player.isStarted}\n              onStart={() => player.setStarted(true)}\n            />\n          )}\n          {showControl && (\n            <Controller\n              audioset={audioset}\n              state={player.state}\n              control={player.isStarted ? player.control : undefined}\n            />\n          )}\n        </Sidebar>\n      )}\n      {areVisualsVisible && (\n        <div className=\"visuals\">\n          <div id=\"visuals\" ref={player.visualsRef} />\n        </div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}