{"ast":null,"code":"var _jsxFileName = \"/Users/dani/Antropoloops/atpls-player/packages/player/src/ui/components/Player/Player.tsx\";\nimport React, { useEffect } from \"react\";\nimport Collapse from \"react-css-collapse\";\nimport { autoUnlockAudio } from \"../../../active-audio-context\";\nimport { useDeviceType } from \"../../hooks/useDeviceType\";\nimport { Spinner } from \"../../shared/Spinner\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { SessionHeader } from \"./SessionHeader\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\nimport { useSession } from \"./useSession\";\nexport const Player = ({\n  audioset\n}) => {\n  var _player$control;\n\n  const session = useSession(audioset);\n  const player = usePlayer(audioset, session.loader);\n  const {\n    isFullscreen,\n    toggleFullscreen\n  } = useFullscreen();\n  const {\n    isMobile\n  } = useDeviceType();\n  useKeyboardListener((_player$control = player.control) === null || _player$control === void 0 ? void 0 : _player$control.keyboard);\n  useEffect(() => autoUnlockAudio(), []);\n  const isSidebarVisible = !isFullscreen;\n  const areVisualsHidden = isMobile && session.visible;\n  const showControl = true;\n  const showSession = session.started && !session.visible;\n\n  const Header = () => /*#__PURE__*/React.createElement(SessionHeader, {\n    meta: audioset.meta,\n    onToggle: session.started ? session.toggle : session.start,\n    isOpen: showSession,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }); // const Header = () =>\n  //   session.started && !session.visible ? (\n  //     <SessionHeader meta={audioset.meta} session={session} />\n  //   ) : (\n  //     <BundleHeader meta={audioset.meta} />\n  //   );\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App Player\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, isSidebarVisible && /*#__PURE__*/React.createElement(Sidebar, {\n    header: Header,\n    audioset: audioset,\n    onFullscreen: toggleFullscreen,\n    onStopAll: () => {\n      var _player$control2;\n\n      return player === null || player === void 0 ? void 0 : (_player$control2 = player.control) === null || _player$control2 === void 0 ? void 0 : _player$control2.stopAll(0);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: session.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    center: \"horizontal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: session.visible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Session, {\n    audioset: audioset,\n    isStarted: session.started,\n    onStart: () => session.start(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: showControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Controller, {\n    audioset: audioset,\n    state: player.state,\n    control: !session.visible ? player.control : undefined,\n    onResume: session.start,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"visuals\",\n    style: {\n      display: areVisualsHidden ? \"none\" : \"\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: areVisualsHidden ? \"\" : \"visuals-display\",\n    ref: player.visualsRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  })));\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/packages/player/src/ui/components/Player/Player.tsx"],"names":["React","useEffect","Collapse","autoUnlockAudio","useDeviceType","Spinner","Controller","Session","SessionHeader","Sidebar","useFullscreen","useKeyboardListener","usePlayer","useSession","Player","audioset","session","player","loader","isFullscreen","toggleFullscreen","isMobile","control","keyboard","isSidebarVisible","areVisualsHidden","visible","showControl","showSession","started","Header","meta","toggle","start","stopAll","loading","state","undefined","display","visualsRef"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Collapse from \"react-css-collapse\";\nimport { autoUnlockAudio } from \"../../../active-audio-context\";\nimport { Audioset } from \"../../../audioset\";\nimport { useDeviceType } from \"../../hooks/useDeviceType\";\nimport { Spinner } from \"../../shared/Spinner\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { SessionHeader } from \"./SessionHeader\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\nimport { useSession } from \"./useSession\";\n\nexport interface PlayerProps {\n  audioset: Audioset;\n}\n\nexport const Player = ({ audioset }: PlayerProps) => {\n  const session = useSession(audioset);\n  const player = usePlayer(audioset, session.loader);\n  const { isFullscreen, toggleFullscreen } = useFullscreen();\n  const { isMobile } = useDeviceType();\n  useKeyboardListener(player.control?.keyboard);\n\n  useEffect(() => autoUnlockAudio(), []);\n\n  const isSidebarVisible = !isFullscreen;\n  const areVisualsHidden = isMobile && session.visible;\n  const showControl = true;\n  const showSession = session.started && !session.visible;\n\n  const Header = () => (\n    <SessionHeader\n      meta={audioset.meta}\n      onToggle={session.started ? session.toggle : session.start}\n      isOpen={showSession}\n    />\n  );\n  // const Header = () =>\n  //   session.started && !session.visible ? (\n  //     <SessionHeader meta={audioset.meta} session={session} />\n  //   ) : (\n  //     <BundleHeader meta={audioset.meta} />\n  //   );\n\n  return (\n    <div className=\"App Player\">\n      {isSidebarVisible && (\n        <Sidebar\n          header={Header}\n          audioset={audioset}\n          onFullscreen={toggleFullscreen}\n          onStopAll={() => player?.control?.stopAll(0)}\n        >\n          <Collapse isOpen={session.loading}>\n            <Spinner center=\"horizontal\" />\n          </Collapse>\n          <Collapse isOpen={session.visible}>\n            <Session\n              audioset={audioset}\n              isStarted={session.started}\n              onStart={() => session.start()}\n            />\n          </Collapse>\n          <Collapse isOpen={showControl}>\n            <Controller\n              audioset={audioset}\n              state={player.state}\n              control={!session.visible ? player.control : undefined}\n              onResume={session.start}\n            />\n          </Collapse>\n        </Sidebar>\n      )}\n      <div\n        className=\"visuals\"\n        style={{ display: areVisualsHidden ? \"none\" : \"\" }}\n      >\n        <div\n          className={areVisualsHidden ? \"\" : \"visuals-display\"}\n          ref={player.visualsRef}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}