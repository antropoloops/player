{"ast":null,"code":"var _jsxFileName = \"/Users/dani/Antropoloops/atpls-player/src/ui/components/Player/Player.tsx\";\nimport React, { useEffect } from \"react\";\nimport Collapse from \"react-css-collapse\";\nimport { autoUnlockAudio } from \"../../../active-audio-context\";\nimport { useDeviceType } from \"../../hooks/useDeviceType\";\nimport { Spinner } from \"../../shared/Spinner\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { SessionHeader } from \"./SessionHeader\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\nimport { useSession } from \"./useSession\";\nexport const Player = ({\n  audioset\n}) => {\n  var _player$control;\n\n  const session = useSession(audioset);\n  const player = usePlayer(audioset, session.loader);\n\n  const _useFullscreen = useFullscreen(),\n        isFullscreen = _useFullscreen.isFullscreen,\n        toggleFullscreen = _useFullscreen.toggleFullscreen;\n\n  const _useDeviceType = useDeviceType(),\n        isMobile = _useDeviceType.isMobile;\n\n  useKeyboardListener((_player$control = player.control) === null || _player$control === void 0 ? void 0 : _player$control.keyboard);\n  console.log(\"EA\", audioset.clips.map(c => c.id));\n  useEffect(() => autoUnlockAudio(), []);\n  const isSidebarVisible = !isFullscreen;\n  const areVisualsHidden = isMobile && session.visible;\n  const showControl = true;\n  const showSession = session.started && !session.visible;\n\n  const Header = () => React.createElement(SessionHeader, {\n    meta: audioset.meta,\n    onToggle: session.started ? session.toggle : session.start,\n    isOpen: showSession,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }); // const Header = () =>\n  //   session.started && !session.visible ? (\n  //     <SessionHeader meta={audioset.meta} session={session} />\n  //   ) : (\n  //     <BundleHeader meta={audioset.meta} />\n  //   );\n\n\n  return React.createElement(\"div\", {\n    className: \"App Player\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, isSidebarVisible && React.createElement(Sidebar, {\n    header: Header,\n    audioset: audioset,\n    onFullscreen: toggleFullscreen,\n    onStopAll: () => {\n      var _player$control2;\n\n      return player === null || player === void 0 ? void 0 : (_player$control2 = player.control) === null || _player$control2 === void 0 ? void 0 : _player$control2.stopAll(0);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(Collapse, {\n    isOpen: session.loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(Spinner, {\n    center: \"horizontal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), React.createElement(Collapse, {\n    isOpen: session.visible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Session, {\n    audioset: audioset,\n    isStarted: session.started,\n    onStart: () => session.start(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(Collapse, {\n    isOpen: showControl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Controller, {\n    audioset: audioset,\n    state: player.state,\n    control: !session.visible ? player.control : undefined,\n    onResume: session.start,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"visuals\",\n    style: {\n      display: areVisualsHidden ? \"none\" : \"\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: areVisualsHidden ? \"\" : \"visuals-display\",\n    ref: player.visualsRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/ui/components/Player/Player.tsx"],"names":["React","useEffect","Collapse","autoUnlockAudio","useDeviceType","Spinner","Controller","Session","SessionHeader","Sidebar","useFullscreen","useKeyboardListener","usePlayer","useSession","Player","audioset","session","player","loader","isFullscreen","toggleFullscreen","isMobile","control","keyboard","console","log","clips","map","c","id","isSidebarVisible","areVisualsHidden","visible","showControl","showSession","started","Header","meta","toggle","start","stopAll","loading","state","undefined","display","visualsRef"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,eAAT,QAAgC,+BAAhC;AAEA,SAASC,aAAT,QAA8B,2BAA9B;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,UAAT,QAA2B,cAA3B;AAMA,OAAO,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA+B;AAAA;;AACnD,QAAMC,OAAO,GAAGH,UAAU,CAACE,QAAD,CAA1B;AACA,QAAME,MAAM,GAAGL,SAAS,CAACG,QAAD,EAAWC,OAAO,CAACE,MAAnB,CAAxB;;AAFmD,yBAGRR,aAAa,EAHL;AAAA,QAG3CS,YAH2C,kBAG3CA,YAH2C;AAAA,QAG7BC,gBAH6B,kBAG7BA,gBAH6B;;AAAA,yBAI9BhB,aAAa,EAJiB;AAAA,QAI3CiB,QAJ2C,kBAI3CA,QAJ2C;;AAKnDV,EAAAA,mBAAmB,oBAACM,MAAM,CAACK,OAAR,oDAAC,gBAAgBC,QAAjB,CAAnB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CACE,IADF,EAEEV,QAAQ,CAACW,KAAT,CAAeC,GAAf,CAAmBC,CAAC,IAAIA,CAAC,CAACC,EAA1B,CAFF;AAKA5B,EAAAA,SAAS,CAAC,MAAME,eAAe,EAAtB,EAA0B,EAA1B,CAAT;AAEA,QAAM2B,gBAAgB,GAAG,CAACX,YAA1B;AACA,QAAMY,gBAAgB,GAAGV,QAAQ,IAAIL,OAAO,CAACgB,OAA7C;AACA,QAAMC,WAAW,GAAG,IAApB;AACA,QAAMC,WAAW,GAAGlB,OAAO,CAACmB,OAAR,IAAmB,CAACnB,OAAO,CAACgB,OAAhD;;AAEA,QAAMI,MAAM,GAAG,MACb,oBAAC,aAAD;AACE,IAAA,IAAI,EAAErB,QAAQ,CAACsB,IADjB;AAEE,IAAA,QAAQ,EAAErB,OAAO,CAACmB,OAAR,GAAkBnB,OAAO,CAACsB,MAA1B,GAAmCtB,OAAO,CAACuB,KAFvD;AAGE,IAAA,MAAM,EAAEL,WAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAnBmD,CA0BnD;AACA;AACA;AACA;AACA;AACA;;;AAEA,SACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,gBAAgB,IACf,oBAAC,OAAD;AACE,IAAA,MAAM,EAAEM,MADV;AAEE,IAAA,QAAQ,EAAErB,QAFZ;AAGE,IAAA,YAAY,EAAEK,gBAHhB;AAIE,IAAA,SAAS,EAAE;AAAA;;AAAA,aAAMH,MAAN,aAAMA,MAAN,2CAAMA,MAAM,CAAEK,OAAd,qDAAM,iBAAiBkB,OAAjB,CAAyB,CAAzB,CAAN;AAAA,KAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAExB,OAAO,CAACyB,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,MAAM,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CANF,EASE,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAEzB,OAAO,CAACgB,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AACE,IAAA,QAAQ,EAAEjB,QADZ;AAEE,IAAA,SAAS,EAAEC,OAAO,CAACmB,OAFrB;AAGE,IAAA,OAAO,EAAE,MAAMnB,OAAO,CAACuB,KAAR,EAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CATF,EAgBE,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAEN,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,UAAD;AACE,IAAA,QAAQ,EAAElB,QADZ;AAEE,IAAA,KAAK,EAAEE,MAAM,CAACyB,KAFhB;AAGE,IAAA,OAAO,EAAE,CAAC1B,OAAO,CAACgB,OAAT,GAAmBf,MAAM,CAACK,OAA1B,GAAoCqB,SAH/C;AAIE,IAAA,QAAQ,EAAE3B,OAAO,CAACuB,KAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhBF,CAFJ,EA4BE;AACE,IAAA,SAAS,EAAC,SADZ;AAEE,IAAA,KAAK,EAAE;AAAEK,MAAAA,OAAO,EAAEb,gBAAgB,GAAG,MAAH,GAAY;AAAvC,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AACE,IAAA,SAAS,EAAEA,gBAAgB,GAAG,EAAH,GAAQ,iBADrC;AAEE,IAAA,GAAG,EAAEd,MAAM,CAAC4B,UAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CA5BF,CADF;AAwCD,CAzEM","sourcesContent":["import React, { useEffect } from \"react\";\nimport Collapse from \"react-css-collapse\";\nimport { autoUnlockAudio } from \"../../../active-audio-context\";\nimport { Audioset } from \"../../../audioset\";\nimport { useDeviceType } from \"../../hooks/useDeviceType\";\nimport { Spinner } from \"../../shared/Spinner\";\nimport { Controller } from \"./Controller\";\nimport { Session } from \"./Session\";\nimport { SessionHeader } from \"./SessionHeader\";\nimport { Sidebar } from \"./Sidebar\";\nimport { useFullscreen } from \"./useFullscreen\";\nimport { useKeyboardListener } from \"./useKeyboardListener\";\nimport { usePlayer } from \"./usePlayer\";\nimport { useSession } from \"./useSession\";\n\nexport interface PlayerProps {\n  audioset: Audioset;\n}\n\nexport const Player = ({ audioset }: PlayerProps) => {\n  const session = useSession(audioset);\n  const player = usePlayer(audioset, session.loader);\n  const { isFullscreen, toggleFullscreen } = useFullscreen();\n  const { isMobile } = useDeviceType();\n  useKeyboardListener(player.control?.keyboard);\n\n  console.log(\n    \"EA\",\n    audioset.clips.map(c => c.id),\n  );\n\n  useEffect(() => autoUnlockAudio(), []);\n\n  const isSidebarVisible = !isFullscreen;\n  const areVisualsHidden = isMobile && session.visible;\n  const showControl = true;\n  const showSession = session.started && !session.visible;\n\n  const Header = () => (\n    <SessionHeader\n      meta={audioset.meta}\n      onToggle={session.started ? session.toggle : session.start}\n      isOpen={showSession}\n    />\n  );\n  // const Header = () =>\n  //   session.started && !session.visible ? (\n  //     <SessionHeader meta={audioset.meta} session={session} />\n  //   ) : (\n  //     <BundleHeader meta={audioset.meta} />\n  //   );\n\n  return (\n    <div className=\"App Player\">\n      {isSidebarVisible && (\n        <Sidebar\n          header={Header}\n          audioset={audioset}\n          onFullscreen={toggleFullscreen}\n          onStopAll={() => player?.control?.stopAll(0)}\n        >\n          <Collapse isOpen={session.loading}>\n            <Spinner center=\"horizontal\" />\n          </Collapse>\n          <Collapse isOpen={session.visible}>\n            <Session\n              audioset={audioset}\n              isStarted={session.started}\n              onStart={() => session.start()}\n            />\n          </Collapse>\n          <Collapse isOpen={showControl}>\n            <Controller\n              audioset={audioset}\n              state={player.state}\n              control={!session.visible ? player.control : undefined}\n              onResume={session.start}\n            />\n          </Collapse>\n        </Sidebar>\n      )}\n      <div\n        className=\"visuals\"\n        style={{ display: areVisualsHidden ? \"none\" : \"\" }}\n      >\n        <div\n          className={areVisualsHidden ? \"\" : \"visuals-display\"}\n          ref={player.visualsRef}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}