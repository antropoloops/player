{"ast":null,"code":"import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeConvolverNodeFactory = (createNativeAudioNode, createNativeConvolverNodeFaker, createNotSupportedError, overwriteAccessors) => {\n  return (nativeContext, options) => {\n    const nativeConvolverNode = createNativeAudioNode(nativeContext, ntvCntxt => ntvCntxt.createConvolver());\n\n    try {\n      // Bug #166: Chrome & Opera do not allow yet to set the channelCount to 1.\n      nativeConvolverNode.channelCount = 1;\n    } catch (err) {\n      return createNativeConvolverNodeFaker(nativeContext, options);\n    }\n\n    assignNativeAudioNodeOptions(nativeConvolverNode, options); // The normalize property needs to be set before setting the buffer.\n\n    if (options.disableNormalization === nativeConvolverNode.normalize) {\n      nativeConvolverNode.normalize = !options.disableNormalization;\n    }\n\n    assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer'); // Bug #113: Edge & Safari allow to set the channelCount to a value larger than 2.\n\n    if (options.channelCount > 2) {\n      throw createNotSupportedError();\n    }\n\n    overwriteAccessors(nativeConvolverNode, 'channelCount', get => () => get.call(nativeConvolverNode), set => value => {\n      if (value > 2) {\n        throw createNotSupportedError();\n      }\n\n      return set.call(nativeConvolverNode, value);\n    }); // Bug #114: Edge & Safari allow to set the channelCountMode to 'max'.\n\n    if (options.channelCountMode === 'max') {\n      throw createNotSupportedError();\n    }\n\n    overwriteAccessors(nativeConvolverNode, 'channelCountMode', get => () => get.call(nativeConvolverNode), set => value => {\n      if (value === 'max') {\n        throw createNotSupportedError();\n      }\n\n      return set.call(nativeConvolverNode, value);\n    });\n    return nativeConvolverNode;\n  };\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/standardized-audio-context/build/es2018/factories/native-convolver-node-factory.js"],"names":["assignNativeAudioNodeOption","assignNativeAudioNodeOptions","createNativeConvolverNodeFactory","createNativeAudioNode","createNativeConvolverNodeFaker","createNotSupportedError","overwriteAccessors","nativeContext","options","nativeConvolverNode","ntvCntxt","createConvolver","channelCount","err","disableNormalization","normalize","get","call","set","value","channelCountMode"],"mappings":"AAAA,SAASA,2BAAT,QAA4C,4CAA5C;AACA,SAASC,4BAAT,QAA6C,6CAA7C;AACA,OAAO,MAAMC,gCAAgC,GAAG,CAACC,qBAAD,EAAwBC,8BAAxB,EAAwDC,uBAAxD,EAAiFC,kBAAjF,KAAwG;AACpJ,SAAO,CAACC,aAAD,EAAgBC,OAAhB,KAA4B;AAC/B,UAAMC,mBAAmB,GAAGN,qBAAqB,CAACI,aAAD,EAAiBG,QAAD,IAAcA,QAAQ,CAACC,eAAT,EAA9B,CAAjD;;AACA,QAAI;AACA;AACAF,MAAAA,mBAAmB,CAACG,YAApB,GAAmC,CAAnC;AACH,KAHD,CAIA,OAAOC,GAAP,EAAY;AACR,aAAOT,8BAA8B,CAACG,aAAD,EAAgBC,OAAhB,CAArC;AACH;;AACDP,IAAAA,4BAA4B,CAACQ,mBAAD,EAAsBD,OAAtB,CAA5B,CAT+B,CAU/B;;AACA,QAAIA,OAAO,CAACM,oBAAR,KAAiCL,mBAAmB,CAACM,SAAzD,EAAoE;AAChEN,MAAAA,mBAAmB,CAACM,SAApB,GAAgC,CAACP,OAAO,CAACM,oBAAzC;AACH;;AACDd,IAAAA,2BAA2B,CAACS,mBAAD,EAAsBD,OAAtB,EAA+B,QAA/B,CAA3B,CAd+B,CAe/B;;AACA,QAAIA,OAAO,CAACI,YAAR,GAAuB,CAA3B,EAA8B;AAC1B,YAAMP,uBAAuB,EAA7B;AACH;;AACDC,IAAAA,kBAAkB,CAACG,mBAAD,EAAsB,cAAtB,EAAuCO,GAAD,IAAS,MAAMA,GAAG,CAACC,IAAJ,CAASR,mBAAT,CAArD,EAAqFS,GAAD,IAAUC,KAAD,IAAW;AACtH,UAAIA,KAAK,GAAG,CAAZ,EAAe;AACX,cAAMd,uBAAuB,EAA7B;AACH;;AACD,aAAOa,GAAG,CAACD,IAAJ,CAASR,mBAAT,EAA8BU,KAA9B,CAAP;AACH,KALiB,CAAlB,CAnB+B,CAyB/B;;AACA,QAAIX,OAAO,CAACY,gBAAR,KAA6B,KAAjC,EAAwC;AACpC,YAAMf,uBAAuB,EAA7B;AACH;;AACDC,IAAAA,kBAAkB,CAACG,mBAAD,EAAsB,kBAAtB,EAA2CO,GAAD,IAAS,MAAMA,GAAG,CAACC,IAAJ,CAASR,mBAAT,CAAzD,EAAyFS,GAAD,IAAUC,KAAD,IAAW;AAC1H,UAAIA,KAAK,KAAK,KAAd,EAAqB;AACjB,cAAMd,uBAAuB,EAA7B;AACH;;AACD,aAAOa,GAAG,CAACD,IAAJ,CAASR,mBAAT,EAA8BU,KAA9B,CAAP;AACH,KALiB,CAAlB;AAMA,WAAOV,mBAAP;AACH,GApCD;AAqCH,CAtCM","sourcesContent":["import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeConvolverNodeFactory = (createNativeAudioNode, createNativeConvolverNodeFaker, createNotSupportedError, overwriteAccessors) => {\n    return (nativeContext, options) => {\n        const nativeConvolverNode = createNativeAudioNode(nativeContext, (ntvCntxt) => ntvCntxt.createConvolver());\n        try {\n            // Bug #166: Chrome & Opera do not allow yet to set the channelCount to 1.\n            nativeConvolverNode.channelCount = 1;\n        }\n        catch (err) {\n            return createNativeConvolverNodeFaker(nativeContext, options);\n        }\n        assignNativeAudioNodeOptions(nativeConvolverNode, options);\n        // The normalize property needs to be set before setting the buffer.\n        if (options.disableNormalization === nativeConvolverNode.normalize) {\n            nativeConvolverNode.normalize = !options.disableNormalization;\n        }\n        assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer');\n        // Bug #113: Edge & Safari allow to set the channelCount to a value larger than 2.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n        overwriteAccessors(nativeConvolverNode, 'channelCount', (get) => () => get.call(nativeConvolverNode), (set) => (value) => {\n            if (value > 2) {\n                throw createNotSupportedError();\n            }\n            return set.call(nativeConvolverNode, value);\n        });\n        // Bug #114: Edge & Safari allow to set the channelCountMode to 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        overwriteAccessors(nativeConvolverNode, 'channelCountMode', (get) => () => get.call(nativeConvolverNode), (set) => (value) => {\n            if (value === 'max') {\n                throw createNotSupportedError();\n            }\n            return set.call(nativeConvolverNode, value);\n        });\n        return nativeConvolverNode;\n    };\n};\n//# sourceMappingURL=/build/es2018/factories/native-convolver-node-factory.js.map"]},"metadata":{},"sourceType":"module"}