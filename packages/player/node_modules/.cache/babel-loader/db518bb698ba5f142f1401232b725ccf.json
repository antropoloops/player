{"ast":null,"code":"import*as d3 from\"d3\";import{getCoverSize}from\"./dimensions\";export default function drawRefLine(parent,visualsWidth,cx,cy,clip){var x1=getCoverSize(visualsWidth)*(clip.trackNum+0.5);var y1=0;var x2=cx;var y2=cy;var h=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));var a=h/10;var alfa=Math.acos((y2-y1)/h);var curveCoords=[{x:x1,y:y1},{x:x1+(x2-x1)/2+a*Math.cos(Math.PI-alfa),y:y1+(y2-y1)/2+a*Math.sin(Math.PI-alfa)},{x:x2,y:y2}];var line=d3.line().x(function(d){return d.x;}).y(function(d){return d.y;}).curve(d3.curveBasis);var refLine=parent.append(\"path\").datum(curveCoords).attr(\"d\",line).style(\"stroke\",clip.color).style(\"stroke-dasharray\",\"2, 3\").style(\"fill\",\"none\").style(\"stroke-width\",2);return refLine;}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/drawRefLine.ts"],"names":["d3","getCoverSize","drawRefLine","parent","visualsWidth","cx","cy","clip","x1","trackNum","y1","x2","y2","h","Math","sqrt","pow","a","alfa","acos","curveCoords","x","y","cos","PI","sin","line","d","curve","curveBasis","refLine","append","datum","attr","style","color"],"mappings":"AAAA,MAAO,GAAKA,CAAAA,EAAZ,KAAoB,IAApB,CAEA,OAASC,YAAT,KAA6B,cAA7B,CAEA,cAAe,SAASC,CAAAA,WAAT,CACbC,MADa,CAEbC,YAFa,CAGbC,EAHa,CAIbC,EAJa,CAKbC,IALa,CAMb,CACA,GAAMC,CAAAA,EAAE,CAAGP,YAAY,CAACG,YAAD,CAAZ,EAA8BG,IAAI,CAACE,QAAL,CAAgB,GAA9C,CAAX,CACA,GAAMC,CAAAA,EAAE,CAAG,CAAX,CACA,GAAMC,CAAAA,EAAE,CAAGN,EAAX,CACA,GAAMO,CAAAA,EAAE,CAAGN,EAAX,CACA,GAAMO,CAAAA,CAAC,CAAGC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASL,EAAE,CAAGH,EAAd,CAAkB,CAAlB,EAAuBM,IAAI,CAACE,GAAL,CAASJ,EAAE,CAAGF,EAAd,CAAkB,CAAlB,CAAjC,CAAV,CACA,GAAMO,CAAAA,CAAC,CAAGJ,CAAC,CAAG,EAAd,CACA,GAAMK,CAAAA,IAAI,CAAGJ,IAAI,CAACK,IAAL,CAAU,CAACP,EAAE,CAAGF,EAAN,EAAYG,CAAtB,CAAb,CACA,GAAMO,CAAAA,WAAW,CAAG,CAClB,CACEC,CAAC,CAAEb,EADL,CAEEc,CAAC,CAAEZ,EAFL,CADkB,CAKlB,CACEW,CAAC,CAAEb,EAAE,CAAG,CAACG,EAAE,CAAGH,EAAN,EAAY,CAAjB,CAAqBS,CAAC,CAAGH,IAAI,CAACS,GAAL,CAAST,IAAI,CAACU,EAAL,CAAUN,IAAnB,CAD9B,CAEEI,CAAC,CAAEZ,EAAE,CAAG,CAACE,EAAE,CAAGF,EAAN,EAAY,CAAjB,CAAqBO,CAAC,CAAGH,IAAI,CAACW,GAAL,CAASX,IAAI,CAACU,EAAL,CAAUN,IAAnB,CAF9B,CALkB,CASlB,CAAEG,CAAC,CAAEV,EAAL,CAASW,CAAC,CAAEV,EAAZ,CATkB,CAApB,CAYA,GAAMc,CAAAA,IAAI,CAAG1B,EAAE,CACZ0B,IADU,GAEVL,CAFU,CAER,SAACM,CAAD,QAAYA,CAAAA,CAAC,CAACN,CAAd,EAFQ,EAGVC,CAHU,CAGR,SAACK,CAAD,QAAYA,CAAAA,CAAC,CAACL,CAAd,EAHQ,EAIVM,KAJU,CAIJ5B,EAAE,CAAC6B,UAJC,CAAb,CAMA,GAAMC,CAAAA,OAAO,CAAG3B,MAAM,CACnB4B,MADa,CACN,MADM,EAEbC,KAFa,CAEPZ,WAFO,EAGba,IAHa,CAGR,GAHQ,CAGHP,IAHG,EAIbQ,KAJa,CAIP,QAJO,CAIG3B,IAAI,CAAC4B,KAJR,EAKbD,KALa,CAKP,kBALO,CAKa,MALb,EAMbA,KANa,CAMP,MANO,CAMC,MAND,EAObA,KAPa,CAOP,cAPO,CAOS,CAPT,CAAhB,CASA,MAAOJ,CAAAA,OAAP,CACD","sourcesContent":["import * as d3 from \"d3\";\nimport { Clip } from \"../audioset\";\nimport { getCoverSize } from \"./dimensions\";\n\nexport default function drawRefLine(\n  parent: any,\n  visualsWidth: number,\n  cx: any,\n  cy: any,\n  clip: Clip,\n) {\n  const x1 = getCoverSize(visualsWidth) * (clip.trackNum + 0.5);\n  const y1 = 0;\n  const x2 = cx;\n  const y2 = cy;\n  const h = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const a = h / 10;\n  const alfa = Math.acos((y2 - y1) / h);\n  const curveCoords = [\n    {\n      x: x1,\n      y: y1,\n    },\n    {\n      x: x1 + (x2 - x1) / 2 + a * Math.cos(Math.PI - alfa),\n      y: y1 + (y2 - y1) / 2 + a * Math.sin(Math.PI - alfa),\n    },\n    { x: x2, y: y2 },\n  ];\n\n  const line = d3\n    .line()\n    .x((d: any) => d.x)\n    .y((d: any) => d.y)\n    .curve(d3.curveBasis);\n\n  const refLine = parent\n    .append(\"path\")\n    .datum(curveCoords)\n    .attr(\"d\", line)\n    .style(\"stroke\", clip.color)\n    .style(\"stroke-dasharray\", \"2, 3\")\n    .style(\"fill\", \"none\")\n    .style(\"stroke-width\", 2);\n\n  return refLine;\n}\n"]},"metadata":{},"sourceType":"module"}