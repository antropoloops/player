{"ast":null,"code":"import debug from \"debug\";\nimport { useEffect } from \"react\";\nconst log = debug(\"atpls:useKeyboard\");\nexport function useKeyboardListener(keyboard) {\n  useEffect(() => {\n    if (keyboard) {\n      return addKeyboardListeners(keyboard);\n    }\n  }, [keyboard]);\n}\n\nfunction addKeyboardListeners(keyboard) {\n  log(\"Installing keyboard\");\n\n  const onKeyDown = event => keyboard.keyDown(event.key);\n\n  const onKeyUp = event => keyboard.keyUp(event.key);\n\n  window.addEventListener(\"keydown\", onKeyDown);\n  window.addEventListener(\"keyup\", onKeyUp);\n  return () => {\n    log(\"Dispose keyboard\");\n    window.removeEventListener(\"keydown\", onKeyDown);\n    window.removeEventListener(\"keyup\", onKeyUp);\n  };\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/ui/components/Player/useKeyboardListener.tsx"],"names":["debug","useEffect","log","useKeyboardListener","keyboard","addKeyboardListeners","onKeyDown","event","keyDown","key","onKeyUp","keyUp","window","addEventListener","removeEventListener"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AAGA,MAAMC,GAAG,GAAGF,KAAK,CAAC,mBAAD,CAAjB;AAEA,OAAO,SAASG,mBAAT,CAA6BC,QAA7B,EAAuE;AAC5EH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIG,QAAJ,EAAc;AACZ,aAAOC,oBAAoB,CAACD,QAAD,CAA3B;AACD;AACF,GAJQ,EAIN,CAACA,QAAD,CAJM,CAAT;AAKD;;AACD,SAASC,oBAAT,CAA8BD,QAA9B,EAA4D;AAC1DF,EAAAA,GAAG,CAAC,qBAAD,CAAH;;AAEA,QAAMI,SAAS,GAAIC,KAAD,IAA0BH,QAAQ,CAACI,OAAT,CAAiBD,KAAK,CAACE,GAAvB,CAA5C;;AACA,QAAMC,OAAO,GAAIH,KAAD,IAA0BH,QAAQ,CAACO,KAAT,CAAeJ,KAAK,CAACE,GAArB,CAA1C;;AACAG,EAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCP,SAAnC;AACAM,EAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCH,OAAjC;AACA,SAAO,MAAM;AACXR,IAAAA,GAAG,CAAC,kBAAD,CAAH;AACAU,IAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCR,SAAtC;AACAM,IAAAA,MAAM,CAACE,mBAAP,CAA2B,OAA3B,EAAoCJ,OAApC;AACD,GAJD;AAKD","sourcesContent":["import debug from \"debug\";\nimport { useEffect } from \"react\";\nimport { KeyboardController } from \"../../player/Control\";\n\nconst log = debug(\"atpls:useKeyboard\");\n\nexport function useKeyboardListener(keyboard: KeyboardController | undefined) {\n  useEffect(() => {\n    if (keyboard) {\n      return addKeyboardListeners(keyboard);\n    }\n  }, [keyboard]);\n}\nfunction addKeyboardListeners(keyboard: KeyboardController) {\n  log(\"Installing keyboard\");\n\n  const onKeyDown = (event: KeyboardEvent) => keyboard.keyDown(event.key);\n  const onKeyUp = (event: KeyboardEvent) => keyboard.keyUp(event.key);\n  window.addEventListener(\"keydown\", onKeyDown);\n  window.addEventListener(\"keyup\", onKeyUp);\n  return () => {\n    log(\"Dispose keyboard\");\n    window.removeEventListener(\"keydown\", onKeyDown);\n    window.removeEventListener(\"keyup\", onKeyUp);\n  };\n}\n"]},"metadata":{},"sourceType":"module"}