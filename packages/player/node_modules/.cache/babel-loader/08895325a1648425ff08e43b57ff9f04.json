{"ast":null,"code":"export const createCacheTestResult = (ongoingTests, testResults) => {\n  return (tester, test) => {\n    const cachedTestResult = testResults.get(tester);\n\n    if (cachedTestResult !== undefined) {\n      return cachedTestResult;\n    }\n\n    const ongoingTest = ongoingTests.get(tester);\n\n    if (ongoingTest !== undefined) {\n      return ongoingTest;\n    }\n\n    try {\n      const synchronousTestResult = test();\n\n      if (synchronousTestResult instanceof Promise) {\n        ongoingTests.set(tester, synchronousTestResult);\n        return synchronousTestResult.catch(() => false).then(finalTestResult => {\n          ongoingTests.delete(tester);\n          testResults.set(tester, finalTestResult);\n          return finalTestResult;\n        });\n      }\n\n      testResults.set(tester, synchronousTestResult);\n      return synchronousTestResult;\n    } catch (_a) {\n      testResults.set(tester, false);\n      return false;\n    }\n  };\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/standardized-audio-context/build/es2018/factories/cache-test-result.js"],"names":["createCacheTestResult","ongoingTests","testResults","tester","test","cachedTestResult","get","undefined","ongoingTest","synchronousTestResult","Promise","set","catch","then","finalTestResult","delete","_a"],"mappings":"AAAA,OAAO,MAAMA,qBAAqB,GAAG,CAACC,YAAD,EAAeC,WAAf,KAA+B;AAChE,SAAO,CAACC,MAAD,EAASC,IAAT,KAAkB;AACrB,UAAMC,gBAAgB,GAAGH,WAAW,CAACI,GAAZ,CAAgBH,MAAhB,CAAzB;;AACA,QAAIE,gBAAgB,KAAKE,SAAzB,EAAoC;AAChC,aAAOF,gBAAP;AACH;;AACD,UAAMG,WAAW,GAAGP,YAAY,CAACK,GAAb,CAAiBH,MAAjB,CAApB;;AACA,QAAIK,WAAW,KAAKD,SAApB,EAA+B;AAC3B,aAAOC,WAAP;AACH;;AACD,QAAI;AACA,YAAMC,qBAAqB,GAAGL,IAAI,EAAlC;;AACA,UAAIK,qBAAqB,YAAYC,OAArC,EAA8C;AAC1CT,QAAAA,YAAY,CAACU,GAAb,CAAiBR,MAAjB,EAAyBM,qBAAzB;AACA,eAAOA,qBAAqB,CACvBG,KADE,CACI,MAAM,KADV,EAEFC,IAFE,CAEIC,eAAD,IAAqB;AAC3Bb,UAAAA,YAAY,CAACc,MAAb,CAAoBZ,MAApB;AACAD,UAAAA,WAAW,CAACS,GAAZ,CAAgBR,MAAhB,EAAwBW,eAAxB;AACA,iBAAOA,eAAP;AACH,SANM,CAAP;AAOH;;AACDZ,MAAAA,WAAW,CAACS,GAAZ,CAAgBR,MAAhB,EAAwBM,qBAAxB;AACA,aAAOA,qBAAP;AACH,KAdD,CAeA,OAAOO,EAAP,EAAW;AACPd,MAAAA,WAAW,CAACS,GAAZ,CAAgBR,MAAhB,EAAwB,KAAxB;AACA,aAAO,KAAP;AACH;AACJ,GA5BD;AA6BH,CA9BM","sourcesContent":["export const createCacheTestResult = (ongoingTests, testResults) => {\n    return (tester, test) => {\n        const cachedTestResult = testResults.get(tester);\n        if (cachedTestResult !== undefined) {\n            return cachedTestResult;\n        }\n        const ongoingTest = ongoingTests.get(tester);\n        if (ongoingTest !== undefined) {\n            return ongoingTest;\n        }\n        try {\n            const synchronousTestResult = test();\n            if (synchronousTestResult instanceof Promise) {\n                ongoingTests.set(tester, synchronousTestResult);\n                return synchronousTestResult\n                    .catch(() => false)\n                    .then((finalTestResult) => {\n                    ongoingTests.delete(tester);\n                    testResults.set(tester, finalTestResult);\n                    return finalTestResult;\n                });\n            }\n            testResults.set(tester, synchronousTestResult);\n            return synchronousTestResult;\n        }\n        catch (_a) {\n            testResults.set(tester, false);\n            return false;\n        }\n    };\n};\n//# sourceMappingURL=/build/es2018/factories/cache-test-result.js.map"]},"metadata":{},"sourceType":"module"}