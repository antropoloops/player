{"ast":null,"code":"import _slicedToArray from\"/Users/dani/Antropoloops/atpls-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Clip}from\"./Clip\";import{player}from\"../../Player\";export var Clips=function Clips(_ref){var audioset=_ref.audioset;var state=useControlState();if(!audioset||!audioset.tracks)return React.createElement(React.Fragment,null);return React.createElement(\"div\",{className:\"Clips\"},audioset.tracks.map(function(track){return React.createElement(\"div\",{key:track.id,className:\"Track\",style:{backgroundColor:track.color}},React.createElement(\"h2\",{className:\"title\"},track.name),track.clipIds.map(function(clipId){return React.createElement(Clip,{key:clipId,clip:audioset.index.clipById[clipId],isActive:state.clips[clipId].state==='playing',onClick:function onClick(){return player.control.toggleClip(clipId,0);}});}));}));};function useControlState(){var _useState=useState(player.control.getState()),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){return player.onControlStateChanged(function(state){setState(state);});});return state;}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/App/Player/Clips.tsx"],"names":["React","useState","useEffect","Clip","player","Clips","audioset","state","useControlState","tracks","map","track","id","backgroundColor","color","name","clipIds","clipId","index","clipById","clips","control","toggleClip","getState","setState","onControlStateChanged"],"mappings":"4JAAA,MAAOA,CAAAA,KAAP,EAAiBC,QAAjB,CAA2BC,SAA3B,KAA4C,OAA5C,CACA,OAASC,IAAT,KAAqB,QAArB,CAEA,OAAUC,MAAV,KAAwB,cAAxB,CAQA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAA8B,IAA3BC,CAAAA,QAA2B,MAA3BA,QAA2B,CACjD,GAAMC,CAAAA,KAAK,CAAGC,eAAe,EAA7B,CAEA,GAAI,CAACF,QAAD,EAAa,CAACA,QAAQ,CAACG,MAA3B,CAAmC,MAAO,yCAAP,CAEnC,MACE,4BAAK,SAAS,CAAC,OAAf,EACGH,QAAQ,CAACG,MAAT,CAAgBC,GAAhB,CAAoB,SAAAC,KAAK,QACxB,4BAAK,GAAG,CAAEA,KAAK,CAACC,EAAhB,CAAoB,SAAS,CAAC,OAA9B,CAAsC,KAAK,CAAE,CAAEC,eAAe,CAAEF,KAAK,CAACG,KAAzB,CAA7C,EACE,0BAAI,SAAS,CAAC,OAAd,EAAuBH,KAAK,CAACI,IAA7B,CADF,CAEGJ,KAAK,CAACK,OAAN,CAAcN,GAAd,CAAkB,SAAAO,MAAM,QACvB,qBAAC,IAAD,EAAM,GAAG,CAAEA,MAAX,CAAoB,IAAI,CAAEX,QAAQ,CAACY,KAAT,CAAeC,QAAf,CAAwBF,MAAxB,CAA1B,CACA,QAAQ,CAAEV,KAAK,CAACa,KAAN,CAAYH,MAAZ,EAAoBV,KAApB,GAA8B,SADxC,CAEA,OAAO,CAAE,yBAAMH,CAAAA,MAAM,CAACiB,OAAP,CAAeC,UAAf,CAA0BL,MAA1B,CAAkC,CAAlC,CAAN,EAFT,EADuB,EAAxB,CAFH,CADwB,EAAzB,CADH,CADF,CAeD,CApBM,CAsBP,QAAST,CAAAA,eAAT,EAAyC,eACbP,QAAQ,CAACG,MAAM,CAACiB,OAAP,CAAeE,QAAf,EAAD,CADK,wCAChChB,KADgC,eACzBiB,QADyB,eAEvCtB,SAAS,CAAC,iBAAME,CAAAA,MAAM,CAACqB,qBAAP,CAA6B,SAAAlB,KAAK,CAAI,CACpDiB,QAAQ,CAACjB,KAAD,CAAR,CACD,CAFe,CAAN,EAAD,CAAT,CAGA,MAAOA,CAAAA,KAAP,CACD","sourcesContent":["import React, {  useState, useEffect } from \"react\";\nimport { Clip } from \"./Clip\";\nimport { Audioset, } from \"../../Audioset\";\nimport {  player } from \"../../Player\";\nimport { ControlState } from \"../../Player/AudiosetControl\";\n\n\ntype ClipsProps = {\n  audioset: Audioset;\n};\n\nexport const Clips = ({ audioset }: ClipsProps) => {\n  const state = useControlState()\n\n  if (!audioset || !audioset.tracks) return <></>;\n\n  return (\n    <div className=\"Clips\">\n      {audioset.tracks.map(track => (\n        <div key={track.id} className=\"Track\" style={{ backgroundColor: track.color }}>\n          <h2 className=\"title\">{track.name}</h2>\n          {track.clipIds.map(clipId => (\n            <Clip key={clipId}  clip={audioset.index.clipById[clipId]}\n            isActive={state.clips[clipId].state === 'playing'}\n            onClick={() => player.control.toggleClip(clipId, 0)}\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nfunction useControlState(): ControlState {\n  const [state, setState] = useState(player.control.getState())\n  useEffect(() => player.onControlStateChanged(state => {\n    setState(state)\n  }))\n  return state;\n}\n"]},"metadata":{},"sourceType":"module"}