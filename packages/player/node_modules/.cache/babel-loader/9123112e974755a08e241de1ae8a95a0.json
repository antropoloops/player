{"ast":null,"code":"import { geoProjection as projection } from \"d3-geo\";\nimport { aitoffRaw } from \"./aitoff.js\";\nimport { halfPi, epsilon, sin, cos, sqrt, abs, acos } from \"./math.js\";\nexport function winkel3Raw(lambda, phi) {\n  var coordinates = aitoffRaw(lambda, phi);\n  return [(coordinates[0] + lambda / halfPi) / 2, (coordinates[1] + phi) / 2];\n}\n\nwinkel3Raw.invert = function (x, y) {\n  var lambda = x,\n      phi = y,\n      i = 25;\n\n  do {\n    var cosphi = cos(phi),\n        sinphi = sin(phi),\n        sin_2phi = sin(2 * phi),\n        sin2phi = sinphi * sinphi,\n        cos2phi = cosphi * cosphi,\n        sinlambda = sin(lambda),\n        coslambda_2 = cos(lambda / 2),\n        sinlambda_2 = sin(lambda / 2),\n        sin2lambda_2 = sinlambda_2 * sinlambda_2,\n        C = 1 - cos2phi * coslambda_2 * coslambda_2,\n        E = C ? acos(cosphi * coslambda_2) * sqrt(F = 1 / C) : F = 0,\n        F,\n        fx = 0.5 * (2 * E * cosphi * sinlambda_2 + lambda / halfPi) - x,\n        fy = 0.5 * (E * sinphi + phi) - y,\n        dxdlambda = 0.5 * F * (cos2phi * sin2lambda_2 + E * cosphi * coslambda_2 * sin2phi) + 0.5 / halfPi,\n        dxdphi = F * (sinlambda * sin_2phi / 4 - E * sinphi * sinlambda_2),\n        dydlambda = 0.125 * F * (sin_2phi * sinlambda_2 - E * sinphi * cos2phi * sinlambda),\n        dydphi = 0.5 * F * (sin2phi * coslambda_2 + E * sin2lambda_2 * cosphi) + 0.5,\n        denominator = dxdphi * dydlambda - dydphi * dxdlambda,\n        dlambda = (fy * dxdphi - fx * dydphi) / denominator,\n        dphi = (fx * dydlambda - fy * dxdlambda) / denominator;\n    lambda -= dlambda, phi -= dphi;\n  } while ((abs(dlambda) > epsilon || abs(dphi) > epsilon) && --i > 0);\n\n  return [lambda, phi];\n};\n\nexport default function () {\n  return projection(winkel3Raw).scale(158.837);\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/d3-geo-projection/src/winkel3.js"],"names":["geoProjection","projection","aitoffRaw","halfPi","epsilon","sin","cos","sqrt","abs","acos","winkel3Raw","lambda","phi","coordinates","invert","x","y","i","cosphi","sinphi","sin_2phi","sin2phi","cos2phi","sinlambda","coslambda_2","sinlambda_2","sin2lambda_2","C","E","F","fx","fy","dxdlambda","dxdphi","dydlambda","dydphi","denominator","dlambda","dphi","scale"],"mappings":"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","sourcesContent":["import {geoProjection as projection} from \"d3-geo\";\nimport {aitoffRaw} from \"./aitoff.js\";\nimport {halfPi, epsilon, sin, cos, sqrt, abs, acos} from \"./math.js\";\n\nexport function winkel3Raw(lambda, phi) {\n  var coordinates = aitoffRaw(lambda, phi);\n  return [\n    (coordinates[0] + lambda / halfPi) / 2,\n    (coordinates[1] + phi) / 2\n  ];\n}\n\nwinkel3Raw.invert = function(x, y) {\n  var lambda = x, phi = y, i = 25;\n  do {\n    var cosphi = cos(phi),\n        sinphi = sin(phi),\n        sin_2phi = sin(2 * phi),\n        sin2phi = sinphi * sinphi,\n        cos2phi = cosphi * cosphi,\n        sinlambda = sin(lambda),\n        coslambda_2 = cos(lambda / 2),\n        sinlambda_2 = sin(lambda / 2),\n        sin2lambda_2 = sinlambda_2 * sinlambda_2,\n        C = 1 - cos2phi * coslambda_2 * coslambda_2,\n        E = C ? acos(cosphi * coslambda_2) * sqrt(F = 1 / C) : F = 0,\n        F,\n        fx = 0.5 * (2 * E * cosphi * sinlambda_2 + lambda / halfPi) - x,\n        fy = 0.5 * (E * sinphi + phi) - y,\n        dxdlambda = 0.5 * F * (cos2phi * sin2lambda_2 + E * cosphi * coslambda_2 * sin2phi) + 0.5 / halfPi,\n        dxdphi = F * (sinlambda * sin_2phi / 4 - E * sinphi * sinlambda_2),\n        dydlambda = 0.125 * F * (sin_2phi * sinlambda_2 - E * sinphi * cos2phi * sinlambda),\n        dydphi = 0.5 * F * (sin2phi * coslambda_2 + E * sin2lambda_2 * cosphi) + 0.5,\n        denominator = dxdphi * dydlambda - dydphi * dxdlambda,\n        dlambda = (fy * dxdphi - fx * dydphi) / denominator,\n        dphi = (fx * dydlambda - fy * dxdlambda) / denominator;\n    lambda -= dlambda, phi -= dphi;\n  } while ((abs(dlambda) > epsilon || abs(dphi) > epsilon) && --i > 0);\n  return [lambda, phi];\n};\n\nexport default function() {\n  return projection(winkel3Raw)\n      .scale(158.837);\n}\n"]},"metadata":{},"sourceType":"module"}