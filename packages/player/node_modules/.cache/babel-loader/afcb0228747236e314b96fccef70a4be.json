{"ast":null,"code":"var _jsxFileName = \"/Users/dani/Antropoloops/atpls-player/src/ui/Player/Player.tsx\";\nimport React, { useEffect } from \"react\";\nimport { getAudioContext, player } from \"../../player\";\nimport { Header } from \"../shared/Header\";\nimport { Scroll } from \"../shared/Scroll\";\nimport { useDeviceType } from \"../useDeviceType\";\nimport { Controller } from \"./Controller\";\nimport Preview from \"./Preview\";\nimport { useResourceLoadingStatus } from \"./useResourceLoadingStatus\";\nimport { Visuals } from \"./Visuals\";\nconst SKIP_PREVIEW = process.env.NODE_ENV === \"development\" && true;\nexport const Player = ({\n  audioset\n}) => {\n  const resourceStatus = useResourceLoadingStatus();\n  const isReady = resourceStatus.status === \"ready\";\n\n  const _useDeviceType = useDeviceType(),\n        isDesktop = _useDeviceType.isDesktop;\n\n  const isVisual = isDesktop || isReady;\n  useEffect(() => {\n    console.log(\"joder\", isReady, audioset.id);\n\n    if (!isReady && audioset.id) {\n      const handle = () => {\n        console.log(\"Clicked!!!!!!!\");\n      };\n\n      window.addEventListener(\"click\", handle);\n      return () => window.removeEventListener(\"click\", handle);\n    }\n  }, [audioset.id, isReady]);\n\n  const handleStart = () => {\n    getAudioContext().then(() => player.resources.load()).then(() => player.control.keyboard.active = true);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App Player\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(Header, {\n    meta: audioset.meta,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }), React.createElement(Scroll, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, SKIP_PREVIEW || isReady ? React.createElement(Controller, {\n    audioset: audioset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }) : React.createElement(Preview, {\n    audioset: audioset,\n    resourceStatus: resourceStatus,\n    onStart: handleStart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Player\"), isVisual && React.createElement(\"div\", {\n    className: \"visuals\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(Visuals, {\n    audioset: audioset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/ui/Player/Player.tsx"],"names":["React","useEffect","getAudioContext","player","Header","Scroll","useDeviceType","Controller","Preview","useResourceLoadingStatus","Visuals","SKIP_PREVIEW","process","env","NODE_ENV","Player","audioset","resourceStatus","isReady","status","isDesktop","isVisual","console","log","id","handle","window","addEventListener","removeEventListener","handleStart","then","resources","load","control","keyboard","active","meta"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,eAAT,EAA0BC,MAA1B,QAAwC,cAAxC;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,wBAAT,QAAyC,4BAAzC;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,IAA0C,IAA/D;AAMA,OAAO,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA+B;AACnD,QAAMC,cAAc,GAAGR,wBAAwB,EAA/C;AACA,QAAMS,OAAO,GAAGD,cAAc,CAACE,MAAf,KAA0B,OAA1C;;AAFmD,yBAG7Bb,aAAa,EAHgB;AAAA,QAG3Cc,SAH2C,kBAG3CA,SAH2C;;AAKnD,QAAMC,QAAQ,GAAGD,SAAS,IAAIF,OAA9B;AAEAjB,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBL,OAArB,EAA8BF,QAAQ,CAACQ,EAAvC;;AACA,QAAI,CAACN,OAAD,IAAYF,QAAQ,CAACQ,EAAzB,EAA6B;AAC3B,YAAMC,MAAM,GAAG,MAAM;AACnBH,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,OAFD;;AAGAG,MAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCF,MAAjC;AACA,aAAO,MAAMC,MAAM,CAACE,mBAAP,CAA2B,OAA3B,EAAoCH,MAApC,CAAb;AACD;AACF,GATQ,EASN,CAACT,QAAQ,CAACQ,EAAV,EAAcN,OAAd,CATM,CAAT;;AAWA,QAAMW,WAAW,GAAG,MAAM;AACxB3B,IAAAA,eAAe,GACZ4B,IADH,CACQ,MAAM3B,MAAM,CAAC4B,SAAP,CAAiBC,IAAjB,EADd,EAEGF,IAFH,CAEQ,MAAO3B,MAAM,CAAC8B,OAAP,CAAeC,QAAf,CAAwBC,MAAxB,GAAiC,IAFhD;AAGD,GAJD;;AAMA,SACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAEnB,QAAQ,CAACoB,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGzB,YAAY,IAAIO,OAAhB,GACC,oBAAC,UAAD;AAAY,IAAA,QAAQ,EAAEF,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAGC,oBAAC,OAAD;AACE,IAAA,QAAQ,EAAEA,QADZ;AAEE,IAAA,cAAc,EAAEC,cAFlB;AAGE,IAAA,OAAO,EAAEY,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CADF,CAFF,EAeE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAfF,EAgBGR,QAAQ,IACP;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0B,oBAAC,OAAD;AAAS,IAAA,QAAQ,EAAEL,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1B,CAjBJ,CADF;AAsBD,CA9CM","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Audioset } from \"../../audioset\";\nimport { getAudioContext, player } from \"../../player\";\nimport { Header } from \"../shared/Header\";\nimport { Scroll } from \"../shared/Scroll\";\nimport { useDeviceType } from \"../useDeviceType\";\nimport { Controller } from \"./Controller\";\nimport Preview from \"./Preview\";\nimport { useResourceLoadingStatus } from \"./useResourceLoadingStatus\";\nimport { Visuals } from \"./Visuals\";\n\nconst SKIP_PREVIEW = process.env.NODE_ENV === \"development\" && true;\n\nexport interface PlayerProps {\n  audioset: Audioset;\n}\n\nexport const Player = ({ audioset }: PlayerProps) => {\n  const resourceStatus = useResourceLoadingStatus();\n  const isReady = resourceStatus.status === \"ready\";\n  const { isDesktop } = useDeviceType();\n\n  const isVisual = isDesktop || isReady;\n\n  useEffect(() => {\n    console.log(\"joder\", isReady, audioset.id);\n    if (!isReady && audioset.id) {\n      const handle = () => {\n        console.log(\"Clicked!!!!!!!\");\n      };\n      window.addEventListener(\"click\", handle);\n      return () => window.removeEventListener(\"click\", handle);\n    }\n  }, [audioset.id, isReady]);\n\n  const handleStart = () => {\n    getAudioContext()\n      .then(() => player.resources.load())\n      .then(() => (player.control.keyboard.active = true));\n  };\n\n  return (\n    <div className=\"App Player\">\n      <Header meta={audioset.meta} />\n      <Scroll>\n        <div className=\"content\">\n          {SKIP_PREVIEW || isReady ? (\n            <Controller audioset={audioset} />\n          ) : (\n            <Preview\n              audioset={audioset}\n              resourceStatus={resourceStatus}\n              onStart={handleStart}\n            />\n          )}\n        </div>\n      </Scroll>\n      <div className=\"footer\">Player</div>\n      {isVisual && (\n        <div className=\"visuals\">{<Visuals audioset={audioset} />}</div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}