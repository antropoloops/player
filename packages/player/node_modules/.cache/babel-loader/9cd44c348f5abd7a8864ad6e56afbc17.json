{"ast":null,"code":"import*as d3 from\"d3\";export default function createWave(parent,screenWidth,cx,cy,trackColor,trackVolume){var firstRadius=Math.floor(screenWidth/30*trackVolume);var lastRadius=150;var radius=d3.range(firstRadius,lastRadius);var duration=20;var wave=parent.append(\"circle\").attr(\"cx\",cx).attr(\"cy\",cy).attr(\"r\",0).style(\"fill\",\"none\").style(\"stroke\",trackColor);radius.forEach(function(r,i){var initialWidth=2;var strokeWidth=initialWidth-initialWidth*r/lastRadius;wave.transition().duration(duration).delay(i*duration).attr(\"r\",r).style(\"stroke-width\",strokeWidth).on(\"end\",function(d,i,nodes){if(r===lastRadius-1)nodes[i].remove();});});return wave;}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/drawWave.js"],"names":["d3","createWave","parent","screenWidth","cx","cy","trackColor","trackVolume","firstRadius","Math","floor","lastRadius","radius","range","duration","wave","append","attr","style","forEach","r","i","initialWidth","strokeWidth","transition","delay","on","d","nodes","remove"],"mappings":"AAAA,MAAO,GAAKA,CAAAA,EAAZ,KAAoB,IAApB,CAEA,cAAe,SAASC,CAAAA,UAAT,CACbC,MADa,CAEbC,WAFa,CAGbC,EAHa,CAIbC,EAJa,CAKbC,UALa,CAMbC,WANa,CAOb,CACA,GAAMC,CAAAA,WAAW,CAAGC,IAAI,CAACC,KAAL,CAAYP,WAAW,CAAG,EAAf,CAAqBI,WAAhC,CAApB,CACA,GAAMI,CAAAA,UAAU,CAAG,GAAnB,CACA,GAAMC,CAAAA,MAAM,CAAGZ,EAAE,CAACa,KAAH,CAASL,WAAT,CAAsBG,UAAtB,CAAf,CACA,GAAMG,CAAAA,QAAQ,CAAG,EAAjB,CAEA,GAAMC,CAAAA,IAAI,CAAGb,MAAM,CAChBc,MADU,CACH,QADG,EAEVC,IAFU,CAEL,IAFK,CAECb,EAFD,EAGVa,IAHU,CAGL,IAHK,CAGCZ,EAHD,EAIVY,IAJU,CAIL,GAJK,CAIA,CAJA,EAKVC,KALU,CAKJ,MALI,CAKI,MALJ,EAMVA,KANU,CAMJ,QANI,CAMMZ,UANN,CAAb,CAQAM,MAAM,CAACO,OAAP,CAAe,SAACC,CAAD,CAAIC,CAAJ,CAAU,CACvB,GAAMC,CAAAA,YAAY,CAAG,CAArB,CACA,GAAMC,CAAAA,WAAW,CAAGD,YAAY,CAAIA,YAAY,CAAGF,CAAhB,CAAqBT,UAAxD,CACAI,IAAI,CACDS,UADH,GAEGV,QAFH,CAEYA,QAFZ,EAGGW,KAHH,CAGSJ,CAAC,CAAGP,QAHb,EAIGG,IAJH,CAIQ,GAJR,CAIaG,CAJb,EAKGF,KALH,CAKS,cALT,CAKyBK,WALzB,EAMGG,EANH,CAMM,KANN,CAMa,SAACC,CAAD,CAAIN,CAAJ,CAAOO,KAAP,CAAiB,CAC1B,GAAIR,CAAC,GAAKT,UAAU,CAAG,CAAvB,CAA0BiB,KAAK,CAACP,CAAD,CAAL,CAASQ,MAAT,GAC3B,CARH,EASD,CAZD,EAcA,MAAOd,CAAAA,IAAP,CACD","sourcesContent":["import * as d3 from \"d3\";\n\nexport default function createWave(\n  parent,\n  screenWidth,\n  cx,\n  cy,\n  trackColor,\n  trackVolume\n) {\n  const firstRadius = Math.floor((screenWidth / 30) * trackVolume);\n  const lastRadius = 150;\n  const radius = d3.range(firstRadius, lastRadius);\n  const duration = 20;\n\n  const wave = parent\n    .append(\"circle\")\n    .attr(\"cx\", cx)\n    .attr(\"cy\", cy)\n    .attr(\"r\", 0)\n    .style(\"fill\", \"none\")\n    .style(\"stroke\", trackColor);\n\n  radius.forEach((r, i) => {\n    const initialWidth = 2;\n    const strokeWidth = initialWidth - (initialWidth * r) / lastRadius;\n    wave\n      .transition()\n      .duration(duration)\n      .delay(i * duration)\n      .attr(\"r\", r)\n      .style(\"stroke-width\", strokeWidth)\n      .on(\"end\", (d, i, nodes) => {\n        if (r === lastRadius - 1) nodes[i].remove();\n      });\n  });\n\n  return wave;\n}\n"]},"metadata":{},"sourceType":"module"}