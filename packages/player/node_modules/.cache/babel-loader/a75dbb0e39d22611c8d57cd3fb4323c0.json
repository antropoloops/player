{"ast":null,"code":"import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\n\nclass VisualControl {\n  constructor(audioset, el) {\n    this.display = new Display(el);\n    this.visuals = new Visuals(audioset, this.display);\n    setupVisuals(audioset, this);\n    this.handleResize = debounce(() => {\n      this.visuals.resizeSvg();\n    });\n    window.addEventListener(el, handleResize);\n\n    visuals.detach = () => window.removeEventListener(el, handleResize);\n  }\n\n}\n\nexport function createVisuals() {}\n\nfunction setupVisuals(audioset, visuals) {\n  if (audioset.visuals.mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then(response => response.json()).then(data => visuals.setGeodata(data));\n  } else {\n    visuals.setup();\n  }\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/index.ts"],"names":["debounce","Visuals","Display","VisualControl","constructor","audioset","el","display","visuals","setupVisuals","handleResize","resizeSvg","window","addEventListener","detach","removeEventListener","createVisuals","mode","fetch","geomap","url","then","response","json","data","setGeodata","setup"],"mappings":"AAAA,SAASA,QAAT,QAAyB,QAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAGA,MAAMC,aAAN,CAAoB;AAClBC,EAAAA,WAAW,CAACC,QAAD,EAAqBC,EAArB,EAA8B;AACvC,SAAKC,OAAL,GAAe,IAAIL,OAAJ,CAAYI,EAAZ,CAAf;AACA,SAAKE,OAAL,GAAe,IAAIP,OAAJ,CAAYI,QAAZ,EAAsB,KAAKE,OAA3B,CAAf;AACAE,IAAAA,YAAY,CAACJ,QAAD,EAAW,IAAX,CAAZ;AAEA,SAAKK,YAAL,GAAoBV,QAAQ,CAAC,MAAM;AACjC,WAAKQ,OAAL,CAAaG,SAAb;AACD,KAF2B,CAA5B;AAIAC,IAAAA,MAAM,CAACC,gBAAP,CAAwBP,EAAxB,EAA4BI,YAA5B;;AACAF,IAAAA,OAAO,CAACM,MAAR,GAAiB,MAAMF,MAAM,CAACG,mBAAP,CAA2BT,EAA3B,EAA+BI,YAA/B,CAAvB;AACD;;AAZiB;;AAepB,OAAO,SAASM,aAAT,GAAyB,CAAE;;AAClC,SAASP,YAAT,CAAsBJ,QAAtB,EAA0CG,OAA1C,EAA4D;AAC1D,MAAIH,QAAQ,CAACG,OAAT,CAAiBS,IAAjB,KAA0B,KAA9B,EAAqC;AACnCC,IAAAA,KAAK,CAACb,QAAQ,CAACG,OAAT,CAAiBW,MAAjB,CAAwBC,GAAzB,CAAL,CAAmCC,IAAnC,CAAyCC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAAtD,EAAuEF,IAAvE,CAA6EG,IAAD,IAAUhB,OAAO,CAACiB,UAAR,CAAmBD,IAAnB,CAAtF;AACD,GAFD,MAEO;AACLhB,IAAAA,OAAO,CAACkB,KAAR;AACD;AACF","sourcesContent":["import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\nimport { Audioset } from \"../Audioset\";\n\nclass VisualControl {\n  constructor(audioset: Audioset, el: any) {\n    this.display = new Display(el);\n    this.visuals = new Visuals(audioset, this.display);\n    setupVisuals(audioset, this);\n\n    this.handleResize = debounce(() => {\n      this.visuals.resizeSvg();\n    });\n\n    window.addEventListener(el, handleResize);\n    visuals.detach = () => window.removeEventListener(el, handleResize);\n  }\n}\n\nexport function createVisuals() {}\nfunction setupVisuals(audioset: Audioset, visuals: Visuals) {\n  if (audioset.visuals.mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then((response) => response.json()).then((data) => visuals.setGeodata(data));\n  } else {\n    visuals.setup();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}