{"ast":null,"code":"import _slicedToArray from \"/Users/dani/Antropoloops/atpls-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport * as screen from \"screenfull\";\n\nconst noop = () => Promise.resolve();\n\nconst request = () => screen.isEnabled && screen.request();\n\nexport function useFullscreen() {\n  let request = noop;\n  let exit = noop;\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        isFull = _useState2[0],\n        setIsFull = _useState2[1];\n\n  const detach = useCallback(() => {\n    if (screen.isEnabled) {\n      screen.off(\"change\", setIsFull);\n    }\n  }, []);\n  useEffect(() => {\n    if (screen.isEnabled) {\n      screen.on(\"change\", setIsFull);\n      request = screen.request;\n      exit = screen.exit;\n    }\n\n    return detach;\n  }, []);\n  return {\n    isFull,\n    request,\n    exit\n  };\n}\nexport function useFullscreenOld(onChange) {\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fullscreen = _useState4[0],\n        setFullscreen = _useState4[1];\n\n  const open = () => setFullscreen(Date.now());\n\n  if (screen.isEnabled) {\n    screen.on(\"change\", () => onChange(screen.isEnabled));\n  }\n\n  useEffect(() => {\n    if (!screen.isEnabled) {\n      return;\n    }\n\n    if (fullscreen) {\n      screen.request();\n    } else {\n      screen.exit();\n    }\n  }, [fullscreen]);\n  return {\n    open\n  };\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/ui/Player/useFullscreen.ts"],"names":["useCallback","useEffect","useState","screen","noop","Promise","resolve","request","isEnabled","useFullscreen","exit","isFull","setIsFull","detach","off","on","useFullscreenOld","onChange","fullscreen","setFullscreen","open","Date","now"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAO,KAAKC,MAAZ,MAAwB,YAAxB;;AAEA,MAAMC,IAAgC,GAAG,MAAMC,OAAO,CAACC,OAAR,EAA/C;;AACA,MAAMC,OAAO,GAAG,MAAMJ,MAAM,CAACK,SAAP,IAAoBL,MAAM,CAACI,OAAP,EAA1C;;AAEA,OAAO,SAASE,aAAT,GAAyB;AAC9B,MAAIF,OAAO,GAAGH,IAAd;AACA,MAAIM,IAAI,GAAGN,IAAX;;AAF8B,oBAGFF,QAAQ,EAHN;AAAA;AAAA,QAGvBS,MAHuB;AAAA,QAGfC,SAHe;;AAI9B,QAAMC,MAAM,GAAGb,WAAW,CAAC,MAAM;AAC/B,QAAIG,MAAM,CAACK,SAAX,EAAsB;AACpBL,MAAAA,MAAM,CAACW,GAAP,CAAW,QAAX,EAAqBF,SAArB;AACD;AACF,GAJyB,EAIvB,EAJuB,CAA1B;AAKAX,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIE,MAAM,CAACK,SAAX,EAAsB;AACpBL,MAAAA,MAAM,CAACY,EAAP,CAAU,QAAV,EAAoBH,SAApB;AACAL,MAAAA,OAAO,GAAGJ,MAAM,CAACI,OAAjB;AACAG,MAAAA,IAAI,GAAGP,MAAM,CAACO,IAAd;AACD;;AACD,WAAOG,MAAP;AACD,GAPQ,EAON,EAPM,CAAT;AAQA,SAAO;AAAEF,IAAAA,MAAF;AAAUJ,IAAAA,OAAV;AAAmBG,IAAAA;AAAnB,GAAP;AACD;AAED,OAAO,SAASM,gBAAT,CAA0BC,QAA1B,EAA+D;AAAA,qBAChCf,QAAQ,EADwB;AAAA;AAAA,QAC7DgB,UAD6D;AAAA,QACjDC,aADiD;;AAEpE,QAAMC,IAAI,GAAG,MAAMD,aAAa,CAACE,IAAI,CAACC,GAAL,EAAD,CAAhC;;AAEA,MAAInB,MAAM,CAACK,SAAX,EAAsB;AACpBL,IAAAA,MAAM,CAACY,EAAP,CAAU,QAAV,EAAoB,MAAME,QAAQ,CAACd,MAAM,CAACK,SAAR,CAAlC;AACD;;AAEDP,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACE,MAAM,CAACK,SAAZ,EAAuB;AACrB;AACD;;AACD,QAAIU,UAAJ,EAAgB;AACdf,MAAAA,MAAM,CAACI,OAAP;AACD,KAFD,MAEO;AACLJ,MAAAA,MAAM,CAACO,IAAP;AACD;AACF,GATQ,EASN,CAACQ,UAAD,CATM,CAAT;AAWA,SAAO;AAAEE,IAAAA;AAAF,GAAP;AACD","sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport * as screen from \"screenfull\";\n\nconst noop: (x?: any) => Promise<void> = () => Promise.resolve();\nconst request = () => screen.isEnabled && screen.request();\n\nexport function useFullscreen() {\n  let request = noop;\n  let exit = noop;\n  const [isFull, setIsFull] = useState();\n  const detach = useCallback(() => {\n    if (screen.isEnabled) {\n      screen.off(\"change\", setIsFull);\n    }\n  }, []);\n  useEffect(() => {\n    if (screen.isEnabled) {\n      screen.on(\"change\", setIsFull);\n      request = screen.request;\n      exit = screen.exit;\n    }\n    return detach;\n  }, []);\n  return { isFull, request, exit };\n}\n\nexport function useFullscreenOld(onChange: (isFull: boolean) => void) {\n  const [fullscreen, setFullscreen] = useState();\n  const open = () => setFullscreen(Date.now());\n\n  if (screen.isEnabled) {\n    screen.on(\"change\", () => onChange(screen.isEnabled));\n  }\n\n  useEffect(() => {\n    if (!screen.isEnabled) {\n      return;\n    }\n    if (fullscreen) {\n      screen.request();\n    } else {\n      screen.exit();\n    }\n  }, [fullscreen]);\n\n  return { open };\n}\n"]},"metadata":{},"sourceType":"module"}