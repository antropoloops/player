{"ast":null,"code":"import * as d3 from \"d3\";\nimport { getCoverSize } from \"./dimensions\";\nexport default function drawRefLine(parent, visualsWidth, cx, cy, trackNumber, trackColor) {\n  const x1 = getCoverSize(visualsWidth) * (trackNumber + 0.5);\n  const y1 = 0;\n  const x2 = cx;\n  const y2 = cy;\n  const h = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const a = h / 10;\n  const alfa = Math.acos((y2 - y1) / h);\n  const curveCoords = [{\n    x: x1,\n    y: y1\n  }, {\n    x: x1 + (x2 - x1) / 2 + a * Math.cos(Math.PI - alfa),\n    y: y1 + (y2 - y1) / 2 + a * Math.sin(Math.PI - alfa)\n  }, {\n    x: x2,\n    y: y2\n  }];\n  const line = d3.line().x(d => d.x).y(d => d.y).curve(d3.curveBasis);\n  const refLine = parent.append(\"path\").datum(curveCoords).attr(\"d\", line).style(\"stroke\", trackColor).style(\"stroke-dasharray\", \"2, 3\").style(\"fill\", \"none\").style(\"stroke-width\", 2);\n  return refLine;\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/drawRefLine.ts"],"names":["d3","getCoverSize","drawRefLine","parent","visualsWidth","cx","cy","trackNumber","trackColor","x1","y1","x2","y2","h","Math","sqrt","pow","a","alfa","acos","curveCoords","x","y","cos","PI","sin","line","d","curve","curveBasis","refLine","append","datum","attr","style"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AACA,SAASC,YAAT,QAA6B,cAA7B;AAEA,eAAe,SAASC,WAAT,CACbC,MADa,EAEbC,YAFa,EAGbC,EAHa,EAIbC,EAJa,EAKbC,WALa,EAMbC,UANa,EAOb;AACA,QAAMC,EAAE,GAAGR,YAAY,CAACG,YAAD,CAAZ,IAA8BG,WAAW,GAAG,GAA5C,CAAX;AACA,QAAMG,EAAE,GAAG,CAAX;AACA,QAAMC,EAAE,GAAGN,EAAX;AACA,QAAMO,EAAE,GAAGN,EAAX;AACA,QAAMO,CAAC,GAAGC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,GAAL,CAASL,EAAE,GAAGF,EAAd,EAAkB,CAAlB,IAAuBK,IAAI,CAACE,GAAL,CAASJ,EAAE,GAAGF,EAAd,EAAkB,CAAlB,CAAjC,CAAV;AACA,QAAMO,CAAC,GAAGJ,CAAC,GAAG,EAAd;AACA,QAAMK,IAAI,GAAGJ,IAAI,CAACK,IAAL,CAAU,CAACP,EAAE,GAAGF,EAAN,IAAYG,CAAtB,CAAb;AACA,QAAMO,WAAW,GAAG,CAClB;AACEC,IAAAA,CAAC,EAAEZ,EADL;AAEEa,IAAAA,CAAC,EAAEZ;AAFL,GADkB,EAKlB;AACEW,IAAAA,CAAC,EAAEZ,EAAE,GAAG,CAACE,EAAE,GAAGF,EAAN,IAAY,CAAjB,GAAqBQ,CAAC,GAAGH,IAAI,CAACS,GAAL,CAAST,IAAI,CAACU,EAAL,GAAUN,IAAnB,CAD9B;AAEEI,IAAAA,CAAC,EAAEZ,EAAE,GAAG,CAACE,EAAE,GAAGF,EAAN,IAAY,CAAjB,GAAqBO,CAAC,GAAGH,IAAI,CAACW,GAAL,CAASX,IAAI,CAACU,EAAL,GAAUN,IAAnB;AAF9B,GALkB,EASlB;AAAEG,IAAAA,CAAC,EAAEV,EAAL;AAASW,IAAAA,CAAC,EAAEV;AAAZ,GATkB,CAApB;AAYA,QAAMc,IAAI,GAAG1B,EAAE,CACZ0B,IADU,GAEVL,CAFU,CAERM,CAAC,IAAIA,CAAC,CAACN,CAFC,EAGVC,CAHU,CAGRK,CAAC,IAAIA,CAAC,CAACL,CAHC,EAIVM,KAJU,CAIJ5B,EAAE,CAAC6B,UAJC,CAAb;AAMA,QAAMC,OAAO,GAAG3B,MAAM,CACnB4B,MADa,CACN,MADM,EAEbC,KAFa,CAEPZ,WAFO,EAGba,IAHa,CAGR,GAHQ,EAGHP,IAHG,EAIbQ,KAJa,CAIP,QAJO,EAIG1B,UAJH,EAKb0B,KALa,CAKP,kBALO,EAKa,MALb,EAMbA,KANa,CAMP,MANO,EAMC,MAND,EAObA,KAPa,CAOP,cAPO,EAOS,CAPT,CAAhB;AASA,SAAOJ,OAAP;AACD","sourcesContent":["import * as d3 from \"d3\";\nimport { getCoverSize } from \"./dimensions\";\n\nexport default function drawRefLine(\n  parent,\n  visualsWidth,\n  cx,\n  cy,\n  trackNumber,\n  trackColor\n) {\n  const x1 = getCoverSize(visualsWidth) * (trackNumber + 0.5);\n  const y1 = 0;\n  const x2 = cx;\n  const y2 = cy;\n  const h = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const a = h / 10;\n  const alfa = Math.acos((y2 - y1) / h);\n  const curveCoords = [\n    {\n      x: x1,\n      y: y1\n    },\n    {\n      x: x1 + (x2 - x1) / 2 + a * Math.cos(Math.PI - alfa),\n      y: y1 + (y2 - y1) / 2 + a * Math.sin(Math.PI - alfa)\n    },\n    { x: x2, y: y2 }\n  ];\n\n  const line = d3\n    .line()\n    .x(d => d.x)\n    .y(d => d.y)\n    .curve(d3.curveBasis);\n\n  const refLine = parent\n    .append(\"path\")\n    .datum(curveCoords)\n    .attr(\"d\", line)\n    .style(\"stroke\", trackColor)\n    .style(\"stroke-dasharray\", \"2, 3\")\n    .style(\"fill\", \"none\")\n    .style(\"stroke-width\", 2);\n\n  return refLine;\n}\n"]},"metadata":{},"sourceType":"module"}