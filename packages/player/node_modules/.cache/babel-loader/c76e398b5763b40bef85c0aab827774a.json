{"ast":null,"code":"import { geoProjectionMutator as projectionMutator } from \"d3-geo\";\nimport { acos, asin, atan2, cos, degrees, radians, sin, sqrt } from \"./math.js\";\n\nfunction satelliteVerticalRaw(P) {\n  function forward(lambda, phi) {\n    var cosPhi = cos(phi),\n        k = (P - 1) / (P - cosPhi * cos(lambda));\n    return [k * cosPhi * sin(lambda), k * sin(phi)];\n  }\n\n  forward.invert = function (x, y) {\n    var rho2 = x * x + y * y,\n        rho = sqrt(rho2),\n        sinc = (P - sqrt(1 - rho2 * (P + 1) / (P - 1))) / ((P - 1) / rho + rho / (P - 1));\n    return [atan2(x * sinc, rho * sqrt(1 - sinc * sinc)), rho ? asin(y * sinc / rho) : 0];\n  };\n\n  return forward;\n}\n\nexport function satelliteRaw(P, omega) {\n  var vertical = satelliteVerticalRaw(P);\n  if (!omega) return vertical;\n  var cosOmega = cos(omega),\n      sinOmega = sin(omega);\n\n  function forward(lambda, phi) {\n    var coordinates = vertical(lambda, phi),\n        y = coordinates[1],\n        A = y * sinOmega / (P - 1) + cosOmega;\n    return [coordinates[0] * cosOmega / A, y / A];\n  }\n\n  forward.invert = function (x, y) {\n    var k = (P - 1) / (P - 1 - y * sinOmega);\n    return vertical.invert(k * x, k * y * cosOmega);\n  };\n\n  return forward;\n}\nexport default function () {\n  var distance = 2,\n      omega = 0,\n      m = projectionMutator(satelliteRaw),\n      p = m(distance, omega); // As a multiple of radius.\n\n  p.distance = function (_) {\n    if (!arguments.length) return distance;\n    return m(distance = +_, omega);\n  };\n\n  p.tilt = function (_) {\n    if (!arguments.length) return omega * degrees;\n    return m(distance, omega = _ * radians);\n  };\n\n  return p.scale(432.147).clipAngle(acos(1 / distance) * degrees - 1e-6);\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/node_modules/d3-geo-projection/src/satellite.js"],"names":["geoProjectionMutator","projectionMutator","acos","asin","atan2","cos","degrees","radians","sin","sqrt","satelliteVerticalRaw","P","forward","lambda","phi","cosPhi","k","invert","x","y","rho2","rho","sinc","satelliteRaw","omega","vertical","cosOmega","sinOmega","coordinates","A","distance","m","p","_","arguments","length","tilt","scale","clipAngle"],"mappings":"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","sourcesContent":["import {geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {acos, asin, atan2, cos, degrees, radians, sin, sqrt} from \"./math.js\";\n\nfunction satelliteVerticalRaw(P) {\n  function forward(lambda, phi) {\n    var cosPhi = cos(phi),\n        k = (P - 1) / (P - cosPhi * cos(lambda));\n    return [\n      k * cosPhi * sin(lambda),\n      k * sin(phi)\n    ];\n  }\n\n  forward.invert = function(x, y) {\n    var rho2 = x * x + y * y,\n        rho = sqrt(rho2),\n        sinc = (P - sqrt(1 - rho2 * (P + 1) / (P - 1))) / ((P - 1) / rho + rho / (P - 1));\n    return [\n      atan2(x * sinc, rho * sqrt(1 - sinc * sinc)),\n      rho ? asin(y * sinc / rho) : 0\n    ];\n  };\n\n  return forward;\n}\n\nexport function satelliteRaw(P, omega) {\n  var vertical = satelliteVerticalRaw(P);\n  if (!omega) return vertical;\n  var cosOmega = cos(omega),\n      sinOmega = sin(omega);\n\n  function forward(lambda, phi) {\n    var coordinates = vertical(lambda, phi),\n        y = coordinates[1],\n        A = y * sinOmega / (P - 1) + cosOmega;\n    return [\n      coordinates[0] * cosOmega / A,\n      y / A\n    ];\n  }\n\n  forward.invert = function(x, y) {\n    var k = (P - 1) / (P - 1 - y * sinOmega);\n    return vertical.invert(k * x, k * y * cosOmega);\n  };\n\n  return forward;\n}\n\nexport default function() {\n  var distance = 2,\n      omega = 0,\n      m = projectionMutator(satelliteRaw),\n      p = m(distance, omega);\n\n  // As a multiple of radius.\n  p.distance = function(_) {\n    if (!arguments.length) return distance;\n    return m(distance = +_, omega);\n  };\n\n  p.tilt = function(_) {\n    if (!arguments.length) return omega * degrees;\n    return m(distance, omega = _ * radians);\n  };\n\n  return p\n      .scale(432.147)\n      .clipAngle(acos(1 / distance) * degrees - 1e-6);\n}\n"]},"metadata":{},"sourceType":"module"}