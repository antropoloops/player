{"ast":null,"code":"import _classCallCheck from\"/Users/dani/Antropoloops/atpls-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dani/Antropoloops/atpls-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{debounce}from\"lodash\";import Visuals from\"./visuals\";import Display from\"./display\";export var VisualControl=/*#__PURE__*/function(){function VisualControl(audioset,el){var _this=this;_classCallCheck(this,VisualControl);this.audioset=audioset;this.el=el;this.display=void 0;this.visuals=void 0;this.handleResize=void 0;this.display=new Display(el);this.visuals=new Visuals(audioset,this.display);setupVisuals(audioset,this.visuals);this.handleResize=debounce(function(){_this.visuals.resizeSvg();});window.addEventListener(el,this.handleResize);}_createClass(VisualControl,[{key:\"startClip\",value:function startClip(clipId){this.visuals.show(clipId);}},{key:\"stopClip\",value:function stopClip(clipId){this.visuals.hide(clipId);}},{key:\"detach\",value:function detach(){window.removeEventListener(this.el,this.handleResize);}}]);return VisualControl;}();export function createVisuals(){}function setupVisuals(audioset,visuals){if(audioset.visuals.mode===\"map\"){fetch(audioset.visuals.geomap.url).then(function(response){return response.json();}).then(function(data){return visuals.setGeodata(data);});}else{visuals.setup();}}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/index.ts"],"names":["debounce","Visuals","Display","VisualControl","audioset","el","display","visuals","handleResize","setupVisuals","resizeSvg","window","addEventListener","clipId","show","hide","removeEventListener","createVisuals","mode","fetch","geomap","url","then","response","json","data","setGeodata","setup"],"mappings":"sTAAA,OAASA,QAAT,KAAyB,QAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAGA,UAAaC,CAAAA,aAAb,yBAKE,uBAAoBC,QAApB,CAAgDC,EAAhD,CAAyD,yDAArCD,QAAqC,CAArCA,QAAqC,MAATC,EAAS,CAATA,EAAS,MAJjDC,OAIiD,aAHjDC,OAGiD,aAFjDC,YAEiD,QACvD,KAAKF,OAAL,CAAe,GAAIJ,CAAAA,OAAJ,CAAYG,EAAZ,CAAf,CACA,KAAKE,OAAL,CAAe,GAAIN,CAAAA,OAAJ,CAAYG,QAAZ,CAAsB,KAAKE,OAA3B,CAAf,CACAG,YAAY,CAACL,QAAD,CAAW,KAAKG,OAAhB,CAAZ,CAEA,KAAKC,YAAL,CAAoBR,QAAQ,CAAC,UAAM,CACjC,KAAI,CAACO,OAAL,CAAaG,SAAb,GACD,CAF2B,CAA5B,CAIAC,MAAM,CAACC,gBAAP,CAAwBP,EAAxB,CAA4B,KAAKG,YAAjC,EACD,CAfH,sEAiBmBK,MAjBnB,CAiBmC,CAC/B,KAAKN,OAAL,CAAaO,IAAb,CAAkBD,MAAlB,EACD,CAnBH,0CAqBkBA,MArBlB,CAqBkC,CAC9B,KAAKN,OAAL,CAAaQ,IAAb,CAAkBF,MAAlB,EACD,CAvBH,uCAyBW,CACPF,MAAM,CAACK,mBAAP,CAA2B,KAAKX,EAAhC,CAAoC,KAAKG,YAAzC,EACD,CA3BH,6BA8BA,MAAO,SAASS,CAAAA,aAAT,EAAyB,CAAE,CAClC,QAASR,CAAAA,YAAT,CAAsBL,QAAtB,CAA0CG,OAA1C,CAA4D,CAC1D,GAAIH,QAAQ,CAACG,OAAT,CAAiBW,IAAjB,GAA0B,KAA9B,CAAqC,CACnCC,KAAK,CAACf,QAAQ,CAACG,OAAT,CAAiBa,MAAjB,CAAwBC,GAAzB,CAAL,CAAmCC,IAAnC,CAAwC,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAAxC,EAAuEF,IAAvE,CAA4E,SAACG,IAAD,QAAUlB,CAAAA,OAAO,CAACmB,UAAR,CAAmBD,IAAnB,CAAV,EAA5E,EACD,CAFD,IAEO,CACLlB,OAAO,CAACoB,KAAR,GACD,CACF","sourcesContent":["import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\nimport { Audioset } from \"../Audioset\";\n\nexport class VisualControl {\n  private display: Display;\n  private visuals: Visuals;\n  private handleResize: any;\n\n  constructor(private audioset: Audioset, private el: any) {\n    this.display = new Display(el);\n    this.visuals = new Visuals(audioset, this.display);\n    setupVisuals(audioset, this.visuals);\n\n    this.handleResize = debounce(() => {\n      this.visuals.resizeSvg();\n    });\n\n    window.addEventListener(el, this.handleResize);\n  }\n\n  public startClip(clipId: string) {\n    this.visuals.show(clipId);\n  }\n\n  public stopClip(clipId: string) {\n    this.visuals.hide(clipId);\n  }\n\n  detach() {\n    window.removeEventListener(this.el, this.handleResize);\n  }\n}\n\nexport function createVisuals() {}\nfunction setupVisuals(audioset: Audioset, visuals: Visuals) {\n  if (audioset.visuals.mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then((response) => response.json()).then((data) => visuals.setGeodata(data));\n  } else {\n    visuals.setup();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}