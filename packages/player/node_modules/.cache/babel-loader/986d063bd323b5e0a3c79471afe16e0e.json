{"ast":null,"code":"/**\n * A simple pub/sub emitter\n */\nexport class Emitter {\n  constructor() {\n    this.listeners = [];\n  }\n\n  emit(event) {\n    this.listeners.forEach(listen => listen(event));\n  }\n\n  on(listener) {\n    this.listeners.push(listener);\n    return () => this.off(listener);\n  }\n\n  off(listener) {\n    const index = this.listeners.indexOf(listener);\n    console.log(\"REMOVE LISTENER\", listener, index);\n\n    if (index > -1) {\n      this.listeners.splice(index, 1);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/player/Emitter.ts"],"names":["Emitter","listeners","emit","event","forEach","listen","on","listener","push","off","index","indexOf","console","log","splice"],"mappings":"AAGA;;;AAGA,OAAO,MAAMA,OAAN,CAAiB;AAAA;AAAA,SACLC,SADK,GAC2B,EAD3B;AAAA;;AAEfC,EAAAA,IAAP,CAAYC,KAAZ,EAAsB;AACpB,SAAKF,SAAL,CAAeG,OAAf,CAAuBC,MAAM,IAAIA,MAAM,CAACF,KAAD,CAAvC;AACD;;AACMG,EAAAA,EAAP,CAAUC,QAAV,EAA8C;AAC5C,SAAKN,SAAL,CAAeO,IAAf,CAAoBD,QAApB;AACA,WAAO,MAAM,KAAKE,GAAL,CAASF,QAAT,CAAb;AACD;;AACME,EAAAA,GAAP,CAAWF,QAAX,EAAwC;AACtC,UAAMG,KAAK,GAAG,KAAKT,SAAL,CAAeU,OAAf,CAAuBJ,QAAvB,CAAd;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,QAA/B,EAAyCG,KAAzC;;AACA,QAAIA,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,WAAKT,SAAL,CAAea,MAAf,CAAsBJ,KAAtB,EAA6B,CAA7B;AACD;AACF;;AAfqB","sourcesContent":["export type Listener<T> = (event: T) => void;\nexport type Unsubscribe = () => void;\n\n/**\n * A simple pub/sub emitter\n */\nexport class Emitter<T> {\n  private readonly listeners: Array<Listener<T>> = [];\n  public emit(event: T) {\n    this.listeners.forEach(listen => listen(event));\n  }\n  public on(listener: Listener<T>): Unsubscribe {\n    this.listeners.push(listener);\n    return () => this.off(listener);\n  }\n  public off(listener: Listener<T>): void {\n    const index = this.listeners.indexOf(listener);\n    console.log(\"REMOVE LISTENER\", listener, index);\n    if (index > -1) {\n      this.listeners.splice(index, 1);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}