{"ast":null,"code":"import debounce from \"lodash.debounce\";\nimport { Display } from \"./display\";\nimport { Visuals } from \"./visuals\";\nimport { fetchCountries } from \"./fetchCountries\";\nexport function createVisuals(audioset, el) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n  const config = audioset.visuals;\n\n  if (config.mode === \"map\" && config.geomap) {\n    fetchCountries(config).then(countries => visuals.setCountries(countries));\n  } else if (config.mode === \"panel\") {\n    visuals.setup();\n  }\n\n  window.addEventListener(\"resize\", debounce(() => {\n    visuals.resizeSvg();\n  }));\n  return {\n    start: clipId => visuals.show(clipId),\n    stop: clipId => visuals.hide(clipId)\n  };\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/index.ts"],"names":["debounce","Display","Visuals","fetchCountries","createVisuals","audioset","el","display","visuals","config","mode","geomap","then","countries","setCountries","setup","window","addEventListener","resizeSvg","start","clipId","show","stop","hide"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,iBAArB;AAEA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAEA,OAAO,SAASC,aAAT,CAAuBC,QAAvB,EAA2CC,EAA3C,EAA+D;AACpE,QAAMC,OAAO,GAAG,IAAIN,OAAJ,CAAYK,EAAZ,CAAhB;AACA,QAAME,OAAO,GAAG,IAAIN,OAAJ,CAAYG,QAAZ,EAAsBE,OAAtB,CAAhB;AAEA,QAAME,MAAM,GAAGJ,QAAQ,CAACG,OAAxB;;AAEA,MAAIC,MAAM,CAACC,IAAP,KAAgB,KAAhB,IAAyBD,MAAM,CAACE,MAApC,EAA4C;AAC1CR,IAAAA,cAAc,CAACM,MAAD,CAAd,CAAuBG,IAAvB,CAA6BC,SAAD,IAAeL,OAAO,CAACM,YAAR,CAAqBD,SAArB,CAA3C;AACD,GAFD,MAEO,IAAIJ,MAAM,CAACC,IAAP,KAAgB,OAApB,EAA6B;AAClCF,IAAAA,OAAO,CAACO,KAAR;AACD;;AAEDC,EAAAA,MAAM,CAACC,gBAAP,CACE,QADF,EAEEjB,QAAQ,CAAC,MAAM;AACbQ,IAAAA,OAAO,CAACU,SAAR;AACD,GAFO,CAFV;AAOA,SAAO;AACLC,IAAAA,KAAK,EAAGC,MAAD,IAAoBZ,OAAO,CAACa,IAAR,CAAaD,MAAb,CADtB;AAELE,IAAAA,IAAI,EAAGF,MAAD,IAAoBZ,OAAO,CAACe,IAAR,CAAaH,MAAb;AAFrB,GAAP;AAID","sourcesContent":["import debounce from \"lodash.debounce\";\nimport { Audioset, AudiosetVisuals } from \"../Audioset\";\nimport { Display } from \"./display\";\nimport { Visuals } from \"./visuals\";\nimport { fetchCountries } from \"./fetchCountries\";\n\nexport function createVisuals(audioset: Audioset, el: HTMLDivElement) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n\n  const config = audioset.visuals;\n\n  if (config.mode === \"map\" && config.geomap) {\n    fetchCountries(config).then((countries) => visuals.setCountries(countries));\n  } else if (config.mode === \"panel\") {\n    visuals.setup();\n  }\n\n  window.addEventListener(\n    \"resize\",\n    debounce(() => {\n      visuals.resizeSvg();\n    }),\n  );\n\n  return {\n    start: (clipId: string) => visuals.show(clipId),\n    stop: (clipId: string) => visuals.hide(clipId),\n  };\n}\n"]},"metadata":{},"sourceType":"module"}