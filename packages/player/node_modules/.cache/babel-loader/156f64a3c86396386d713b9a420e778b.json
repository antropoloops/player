{"ast":null,"code":"import * as d3 from \"d3\";\nexport default function createWave(parent, screenWidth, cx, cy, clip) {\n  const firstRadius = Math.floor(screenWidth / 30 * clip.audio.volume);\n  const lastRadius = 150;\n  const radius = d3.range(firstRadius, lastRadius);\n  const duration = 20;\n  const wave = parent.append(\"circle\").attr(\"cx\", cx).attr(\"cy\", cy).attr(\"r\", 0).style(\"fill\", \"none\").style(\"stroke\", clip.color);\n  radius.forEach((r, i) => {\n    const initialWidth = 2;\n    const strokeWidth = initialWidth - initialWidth * r / lastRadius;\n    wave.transition().duration(duration).delay(i * duration).attr(\"r\", r).style(\"stroke-width\", strokeWidth).on(\"end\", (d, i, nodes) => {\n      if (r === lastRadius - 1) nodes[i].remove();\n    });\n  });\n  return wave;\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/drawWave.ts"],"names":["d3","createWave","parent","screenWidth","cx","cy","clip","firstRadius","Math","floor","audio","volume","lastRadius","radius","range","duration","wave","append","attr","style","color","forEach","r","i","initialWidth","strokeWidth","transition","delay","on","d","nodes","remove"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AAGA,eAAe,SAASC,UAAT,CAAoBC,MAApB,EAAiCC,WAAjC,EAAsDC,EAAtD,EAAkEC,EAAlE,EAA8EC,IAA9E,EAA0F;AACvG,QAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWN,WAAW,GAAG,EAAd,GAAmBG,IAAI,CAACI,KAAL,CAAWC,MAAzC,CAApB;AACA,QAAMC,UAAU,GAAG,GAAnB;AACA,QAAMC,MAAM,GAAGb,EAAE,CAACc,KAAH,CAASP,WAAT,EAAsBK,UAAtB,CAAf;AACA,QAAMG,QAAQ,GAAG,EAAjB;AAEA,QAAMC,IAAI,GAAGd,MAAM,CAChBe,MADU,CACH,QADG,EAEVC,IAFU,CAEL,IAFK,EAECd,EAFD,EAGVc,IAHU,CAGL,IAHK,EAGCb,EAHD,EAIVa,IAJU,CAIL,GAJK,EAIA,CAJA,EAKVC,KALU,CAKJ,MALI,EAKI,MALJ,EAMVA,KANU,CAMJ,QANI,EAMMb,IAAI,CAACc,KANX,CAAb;AAQAP,EAAAA,MAAM,CAACQ,OAAP,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACvB,UAAMC,YAAY,GAAG,CAArB;AACA,UAAMC,WAAW,GAAGD,YAAY,GAAGA,YAAY,GAAGF,CAAf,GAAmBV,UAAtD;AACAI,IAAAA,IAAI,CACDU,UADH,GAEGX,QAFH,CAEYA,QAFZ,EAGGY,KAHH,CAGSJ,CAAC,GAAGR,QAHb,EAIGG,IAJH,CAIQ,GAJR,EAIaI,CAJb,EAKGH,KALH,CAKS,cALT,EAKyBM,WALzB,EAMGG,EANH,CAMM,KANN,EAMa,CAACC,CAAD,EAASN,CAAT,EAAoBO,KAApB,KAAqC;AAC9C,UAAIR,CAAC,KAAKV,UAAU,GAAG,CAAvB,EAA0BkB,KAAK,CAACP,CAAD,CAAL,CAASQ,MAAT;AAC3B,KARH;AASD,GAZD;AAcA,SAAOf,IAAP;AACD","sourcesContent":["import * as d3 from \"d3\";\nimport { Clip } from \"../Audioset\";\n\nexport default function createWave(parent: any, screenWidth: number, cx: number, cy: number, clip: Clip) {\n  const firstRadius = Math.floor(screenWidth / 30 * clip.audio.volume);\n  const lastRadius = 150;\n  const radius = d3.range(firstRadius, lastRadius);\n  const duration = 20;\n\n  const wave = parent\n    .append(\"circle\")\n    .attr(\"cx\", cx)\n    .attr(\"cy\", cy)\n    .attr(\"r\", 0)\n    .style(\"fill\", \"none\")\n    .style(\"stroke\", clip.color);\n\n  radius.forEach((r, i) => {\n    const initialWidth = 2;\n    const strokeWidth = initialWidth - initialWidth * r / lastRadius;\n    wave\n      .transition()\n      .duration(duration)\n      .delay(i * duration)\n      .attr(\"r\", r)\n      .style(\"stroke-width\", strokeWidth)\n      .on(\"end\", (d: any, i: number, nodes: any[]) => {\n        if (r === lastRadius - 1) nodes[i].remove();\n      });\n  });\n\n  return wave;\n}\n"]},"metadata":{},"sourceType":"module"}