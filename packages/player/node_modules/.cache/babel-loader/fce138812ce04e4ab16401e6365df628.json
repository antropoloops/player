{"ast":null,"code":"import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\nexport default function createVisuals(audioset, el) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n  const mode = audioset.visuals.mode;\n\n  if (mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then(response => response.json()).then(data => visuals.setGeodata(data));\n  } else if (mode === \"panel\") {\n    visuals.setup();\n  }\n\n  window.addEventListener(\"resize\", debounce(() => {\n    visuals.resizeSvg(el);\n  }));\n  return {\n    start: clipId => visuals.show(clipId),\n    stop: clipId => visuals.hide(clipId)\n  };\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/index.js"],"names":["debounce","Visuals","Display","createVisuals","audioset","el","display","visuals","mode","fetch","geomap","url","then","response","json","data","setGeodata","setup","window","addEventListener","resizeSvg","start","clipId","show","stop","hide"],"mappings":"AAAA,SAASA,QAAT,QAAyB,QAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,eAAe,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,EAAjC,EAAqC;AAClD,QAAMC,OAAO,GAAG,IAAIJ,OAAJ,CAAYG,EAAZ,CAAhB;AACA,QAAME,OAAO,GAAG,IAAIN,OAAJ,CAAYG,QAAZ,EAAsBE,OAAtB,CAAhB;AAEA,QAAME,IAAI,GAAGJ,QAAQ,CAACG,OAAT,CAAiBC,IAA9B;;AAEA,MAAIA,IAAI,KAAK,KAAb,EAAoB;AAClBC,IAAAA,KAAK,CAACL,QAAQ,CAACG,OAAT,CAAiBG,MAAjB,CAAwBC,GAAzB,CAAL,CACGC,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,IAAI,IAAIR,OAAO,CAACS,UAAR,CAAmBD,IAAnB,CAFhB;AAGD,GAJD,MAIO,IAAIP,IAAI,KAAK,OAAb,EAAsB;AAC3BD,IAAAA,OAAO,CAACU,KAAR;AACD;;AAEDC,EAAAA,MAAM,CAACC,gBAAP,CACE,QADF,EAEEnB,QAAQ,CAAC,MAAM;AACbO,IAAAA,OAAO,CAACa,SAAR,CAAkBf,EAAlB;AACD,GAFO,CAFV;AAOA,SAAO;AACLgB,IAAAA,KAAK,EAAEC,MAAM,IAAIf,OAAO,CAACgB,IAAR,CAAaD,MAAb,CADZ;AAELE,IAAAA,IAAI,EAAEF,MAAM,IAAIf,OAAO,CAACkB,IAAR,CAAaH,MAAb;AAFX,GAAP;AAID","sourcesContent":["import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\n\nexport default function createVisuals(audioset, el) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n\n  const mode = audioset.visuals.mode;\n\n  if (mode === \"map\") {\n    fetch(audioset.visuals.geomap.url)\n      .then(response => response.json())\n      .then(data => visuals.setGeodata(data));\n  } else if (mode === \"panel\") {\n    visuals.setup();\n  }\n\n  window.addEventListener(\n    \"resize\",\n    debounce(() => {\n      visuals.resizeSvg(el);\n    })\n  );\n\n  return {\n    start: clipId => visuals.show(clipId),\n    stop: clipId => visuals.hide(clipId)\n  };\n}\n"]},"metadata":{},"sourceType":"module"}