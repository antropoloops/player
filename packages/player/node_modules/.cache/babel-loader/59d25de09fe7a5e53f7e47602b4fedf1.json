{"ast":null,"code":"import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\nexport function createVisuals(audioset, el) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n  setupVisuals(audioset, visuals);\n  const handleResize = debounce(() => {\n    visuals.resizeSvg();\n  });\n  window.addEventListener(el, handleResize);\n\n  visuals.detach = () => window.removeEventListener(el, handleResize);\n}\n\nfunction setupVisuals(audioset, visuals) {\n  if (audioset.visuals.mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then(response => response.json()).then(data => visuals.setGeodata(data));\n  } else {\n    visuals.setup();\n  }\n}","map":{"version":3,"sources":["/Users/dani/Antropoloops/atpls-player/src/visuals/index.ts"],"names":["debounce","Visuals","Display","createVisuals","audioset","el","display","visuals","setupVisuals","handleResize","resizeSvg","window","addEventListener","detach","removeEventListener","mode","fetch","geomap","url","then","response","json","data","setGeodata","setup"],"mappings":"AAAA,SAASA,QAAT,QAAyB,QAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAGA,OAAO,SAASC,aAAT,CAAuBC,QAAvB,EAA2CC,EAA3C,EAAoD;AACzD,QAAMC,OAAO,GAAG,IAAIJ,OAAJ,CAAYG,EAAZ,CAAhB;AACA,QAAME,OAAO,GAAG,IAAIN,OAAJ,CAAYG,QAAZ,EAAsBE,OAAtB,CAAhB;AAEAE,EAAAA,YAAY,CAACJ,QAAD,EAAWG,OAAX,CAAZ;AAEA,QAAME,YAAY,GAAGT,QAAQ,CAAC,MAAM;AAClCO,IAAAA,OAAO,CAACG,SAAR;AACD,GAF4B,CAA7B;AAIAC,EAAAA,MAAM,CAACC,gBAAP,CAAwBP,EAAxB,EAA4BI,YAA5B;;AACAF,EAAAA,OAAO,CAACM,MAAR,GAAiB,MAAMF,MAAM,CAACG,mBAAP,CAA2BT,EAA3B,EAA+BI,YAA/B,CAAvB;AACD;;AACD,SAASD,YAAT,CAAsBJ,QAAtB,EAA0CG,OAA1C,EAA4D;AAC1D,MAAIH,QAAQ,CAACG,OAAT,CAAiBQ,IAAjB,KAA0B,KAA9B,EAAqC;AACnCC,IAAAA,KAAK,CAACZ,QAAQ,CAACG,OAAT,CAAiBU,MAAjB,CAAwBC,GAAzB,CAAL,CAAmCC,IAAnC,CAAyCC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAAtD,EAAuEF,IAAvE,CAA6EG,IAAD,IAAUf,OAAO,CAACgB,UAAR,CAAmBD,IAAnB,CAAtF;AACD,GAFD,MAEO;AACLf,IAAAA,OAAO,CAACiB,KAAR;AACD;AACF","sourcesContent":["import { debounce } from \"lodash\";\nimport Visuals from \"./visuals\";\nimport Display from \"./display\";\nimport { Audioset } from \"../Audioset\";\n\nexport function createVisuals(audioset: Audioset, el: any) {\n  const display = new Display(el);\n  const visuals = new Visuals(audioset, display);\n\n  setupVisuals(audioset, visuals);\n\n  const handleResize = debounce(() => {\n    visuals.resizeSvg();\n  });\n\n  window.addEventListener(el, handleResize);\n  visuals.detach = () => window.removeEventListener(el, handleResize);\n}\nfunction setupVisuals(audioset: Audioset, visuals: Visuals) {\n  if (audioset.visuals.mode === \"map\") {\n    fetch(audioset.visuals.geomap.url).then((response) => response.json()).then((data) => visuals.setGeodata(data));\n  } else {\n    visuals.setup();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}