{"map":{"version":3,"sources":["static/js/6.2d3a6ed7.chunk.js"],"names":["this","push","870","module","__webpack_exports__","__webpack_require__","r","d","createAudioEffects","classCallCheck","createClass","browser","browser_default","n","objectSpread2","AudioEngine_AudioContextEngine","AudioContextEngine","context","Object","output","destination","key","value","props","source","createBufferSource","buffer","createBuffer","sampleRate","loop","connect","track","createGain","gain","volume","input","disconnect","createSampler","buffers","ctx","audio","sampler_AudioSampler","AudioSampler","master","tracks","audioSources","createTrack","audioTrack","id","_this","keys","forEach","trackId","clipId","time","getBuffer","createAudioSource","start","undefined","stop","log","audioset","AudioEffects_AudioEffects","AudioEffects","sampler","meta","title","command","index","trackIdOfClip"],"mappings":"CAACA,KAAK,4BAA8BA,KAAK,6BAA+B,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEhFC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAEAA,EAAoBC,EAAEF,GAGtBC,EAAoBE,EAAEH,EAAqB,sBAAsB,WAAa,OAAqBI,KAGnG,IAAIC,EAAiBJ,EAAoB,IAGrCK,EAAcL,EAAoB,IAGlCM,EAAUN,EAAoB,IAC9BO,EAA+BP,EAAoBQ,EAAEF,GAGrDG,EAAgBT,EAAoB,IAMmD,IAAIU,EAA4C,WAAW,SAASC,EAAmBC,GAASC,OAAOT,EAAgC,EAAvCS,CAA0ClB,KAAKgB,GAAoBhB,KAAKiB,QAAQA,EAAQjB,KAAKmB,YAAO,EAAOnB,KAAKmB,OAAOF,EAAQG,YAAujB,OAA1iBF,OAAOR,EAA6B,EAApCQ,CAAuCF,EAAmB,CAAC,CAACK,IAAI,oBAAoBC,MAAM,SAA2BC,GAAO,IAAIC,EAAOxB,KAAKiB,QAAQQ,qBAAuJ,OAAlID,EAAOE,OAAOH,EAAMG,QAAQ1B,KAAKiB,QAAQU,aAAa,EAAE,GAAG3B,KAAKiB,QAAQW,YAAYJ,EAAOK,MAAK,EAAKL,EAAOM,QAAQP,EAAMJ,QAAeK,IAAU,CAACH,IAAI,cAAcC,MAAM,SAAqBC,GAAO,IAAIQ,EAAM/B,KAAKiB,QAAQe,aAA4E,OAA/DD,EAAME,KAAKX,MAAMC,EAAMW,QAAQ,GAAIH,EAAMD,QAAQP,EAAMJ,QAAc,CAACgB,MAAMJ,EAAMK,WAAW,WAAsB,OAAOL,EAAMK,mBAA4BpB,EAA7uB,GAIxI,SAASqB,EAAcC,EAAQC,GAAK,IAAIC,EAJG,IAAIzB,EAIiBwB,GAAK,OAAO,IAAIE,EAAqBH,EAAQE,GAAQ,IAAIC,EAAkC,WAAW,SAASC,EAAaJ,EAAQE,GAAOtB,OAAOT,EAAgC,EAAvCS,CAA0ClB,KAAK0C,GAAc1C,KAAKsC,QAAQA,EAAQtC,KAAKwC,MAAMA,EAAMxC,KAAK2C,YAAO,EAAO3C,KAAK4C,OAAO,GAAG5C,KAAK6C,aAAa,GAAkB7C,KAAK2C,OAAO3C,KAAKwC,MAAMM,YAAY,CAACZ,OAAxC,GAAsDf,OAAOqB,EAAMrB,SAC6M,OADnMD,OAAOR,EAA6B,EAApCQ,CAAuCwB,EAAa,CAAC,CAACrB,IAAI,cAAcC,MAAM,SAAqBS,GAAO,IAAIgB,EAAW/C,KAAKwC,MAAMM,YAAY5B,OAAOJ,EAA+B,EAAtCI,CAAyC,CAACgB,OAAO,EAAEf,OAAOnB,KAAK2C,OAAOR,OAAOJ,IAAyC,OAAjC/B,KAAK4C,OAAOb,EAAMiB,IAAID,EAAkBhB,EAAMiB,KAAM,CAAC3B,IAAI,UAAUC,MAAM,cAC3uB,CAACD,IAAI,aAAaC,MAAM,WAAsB,IAAI2B,EAAMjD,KAAKkB,OAAOgC,KAAKlD,KAAK4C,QAAQO,SAAQ,SAASC,GAASH,EAAML,OAAOQ,GAAShB,gBAAgBpC,KAAK2C,OAAOP,eAAgB,CAACf,IAAI,QAAQC,MAAM,SAAe+B,EAAOD,EAAQE,GAAM,IAAGtD,KAAK6C,aAAaQ,GAArB,CAAsC,IAAI3B,EAAO1B,KAAKsC,QAAQiB,UAAUF,GAAYtB,EAAM/B,KAAK4C,OAAOQ,GAAa5B,EAAOxB,KAAKwC,MAAMgB,kBAAkB,CAACrC,OAAOY,EAAMI,MAAMT,OAAOA,IAAS1B,KAAK6C,aAAaQ,GAAQ7B,EAAOA,EAAOiC,MAAMH,MAAS,CAACjC,IAAI,OAAOC,MAAM,SAAc+B,EAAOC,GAAM,IAAI9B,EAAOxB,KAAK6C,aAAaQ,QAAoBK,IAATlC,GAAoBA,EAAOmC,KAAKL,GAAOtD,KAAK6C,aAAaQ,QAAQK,MAAsBhB,EAD5e,GAG1JkB,EAAIhD,GAAAA,CAAkB,iBAAiB,SAASJ,EAAmBqD,EAAStB,EAAID,GAAS,OAAO,IAAIwB,EAA0BD,EAAStB,EAAID,GAAU,IAAIwB,EAAuC,WAAW,SAASC,EAAaF,EAAStB,EAAID,GAAS,IAAIW,EAAMjD,KAAKkB,OAAOT,EAAgC,EAAvCS,CAA0ClB,KAAK+D,GAAc/D,KAAK6D,SAASA,EAAS7D,KAAKgE,aAAQ,EAAOJ,EAAI,uBAAuBC,EAASI,KAAKC,OAAOlE,KAAKgE,QAAQ3B,EAAcC,EAAQC,GACrcsB,EAASjB,OAAOO,SAAQ,SAASpB,GAAOkB,EAAMe,QAAQlB,YAAYf,MACmX,OADxWb,OAAOR,EAA6B,EAApCQ,CAAuC6C,EAAa,CAAC,CAAC1C,IAAI,SAASC,MAAM,cACnJ,CAACD,IAAI,SAASC,MAAM,WAAkBtB,KAAKgE,QAAQ5B,eAAgB,CAACf,IAAI,MAAMC,MAAM,SAAa6C,GAAS,IAAIb,EAAKa,EAAQb,KAAK,OAAOa,EAAQA,SAAS,IAAI,YAAY,IAAId,EAAOc,EAAQd,OAAWD,EAAQpD,KAAK6D,SAASO,MAAMC,cAAchB,GAA0C,OAAlCO,EAAI,cAAcP,EAAOD,GAAgBpD,KAAKgE,QAAQP,MAAMJ,EAAOD,EAAQE,GAAM,IAAI,WAAyC,OAA9BM,EAAI,UAAUO,EAAQd,QAAerD,KAAKgE,QAAQL,KAAKQ,EAAQd,OAAOC,QAA2BS,EAFxP"},"code":"(this[\"webpackJsonpatpls-player\"]=this[\"webpackJsonpatpls-player\"]||[]).push([[6],{870:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"createAudioEffects\",(function(){return p}));var a=i(15),s=i(16),u=i(30),c=i.n(u),r=i(17);var n=function(){function t(e){Object(a.a)(this,t),this.context=e,this.output=void 0,this.output=e.destination}return Object(s.a)(t,[{key:\"createAudioSource\",value:function(t){var e=this.context.createBufferSource();return e.buffer=t.buffer||this.context.createBuffer(2,10,this.context.sampleRate),e.loop=!0,e.connect(t.output),e}},{key:\"createTrack\",value:function(t){var e=this.context.createGain();return e.gain.value=t.volume||.7,e.connect(t.output),{input:e,disconnect:function(){return e.disconnect()}}}}]),t}();function o(t,e){var i=new n(e);return new f(t,i)}var f=function(){function t(e,i){Object(a.a)(this,t),this.buffers=e,this.audio=i,this.master=void 0,this.tracks={},this.audioSources={};this.master=this.audio.createTrack({volume:.2,output:i.output})}return Object(s.a)(t,[{key:\"createTrack\",value:function(t){var e=this.audio.createTrack(Object(r.a)({volume:1,output:this.master.input},t));return this.tracks[t.id]=e,t.id}},{key:\"connect\",value:function(){}},{key:\"disconnect\",value:function(){var t=this;Object.keys(this.tracks).forEach((function(e){t.tracks[e].disconnect()})),this.master.disconnect()}},{key:\"start\",value:function(t,e,i){if(!this.audioSources[t]){var a=this.buffers.getBuffer(t),s=this.tracks[e],u=this.audio.createAudioSource({output:s.input,buffer:a});this.audioSources[t]=u,u.start(i)}}},{key:\"stop\",value:function(t,e){var i=this.audioSources[t];void 0!==i&&i.stop(e),this.audioSources[t]=void 0}}]),t}(),h=c()(\"atpls:sampler\");function p(t,e,i){return new d(t,e,i)}var d=function(){function t(e,i,s){var u=this;Object(a.a)(this,t),this.audioset=e,this.sampler=void 0,h(\"init AudioEffects %s\",e.meta.title),this.sampler=o(s,i),e.tracks.forEach((function(t){u.sampler.createTrack(t)}))}return Object(s.a)(t,[{key:\"attach\",value:function(){}},{key:\"detach\",value:function(){this.sampler.disconnect()}},{key:\"run\",value:function(t){var e=t.time;switch(t.command){case\"startClip\":var i=t.clipId,a=this.audioset.index.trackIdOfClip[i];return h(\"start %s %s\",i,a),this.sampler.start(i,a,e);case\"stopClip\":return h(\"stop %s\",t.clipId),this.sampler.stop(t.clipId,e)}}}]),t}()}}]);","extractedComments":[]}