{"map":{"version":3,"sources":["static/js/7.f858986a.chunk.js"],"names":["this","push","869","module","__webpack_exports__","__webpack_require__","r","d","createVisualEffects","classCallCheck","createClass","browser","browser_default","n","lodash_debounce","lodash_debounce_default","ResizeObserver_es","slicedToArray","topojson","getVerticalPadding","visualsWidth","getInfoHeight","getCoverSize","getAlbumHeight","verticalPadding","infoHeight","d3","display_Display","Display","el","Object","svg","createSvg","clear","key","value","width","offsetWidth","height","offsetHeight","isVisible","style","display","container","dimensions","getDimensions","append","attr","concat","selectAll","remove","degreesFromSlice","range","domain","drawCircle","parent","cx","cy","clip","duration","audio","durationSeconds","trackVolume","volume","trackColor","color","circlesGroup","circle","arc","outerArcs","map","i","startAngle","deg2rad","endAngle","NUMSLICES","innerRadius","outerRadius","createOuterArcs","data","enter","innerArcs","createInnerArcs","turnTimer","elapsed","elapsedSeconds","turnScale","empty","stop","degrees","Math","PI","robinson","createMapProjector","scale","center","x","y","translate","calculateMapScale","name","group","createProjector","visuals","albumsHeight","mode","_visuals$geomap","geomap","scaleFactor","containerWidth","containerHeight","realImageWidth","realImageHeight","containerRatio","imageRatio","_ref","_ref2","createPanelProjector","image","size","visuals_Visuals","Visuals","set","circles","albums","refLines","countries","backgroundContainer","circlesContainer","albumsContainer","refLinesContainer","wavesContainer","geodata","collection","objects","features","filter","country","id","index","clipById","_projector","projector","position","_projector2","album","trackNumber","trackNum","imageUrl","resources","cover","small","coverSize","horizontalPadding","textElement","textId","danger","document","getElementById","textLength","getBBox","text","length","slice","wrap","drawAlbum","refLine","x1","x2","y2","h","sqrt","pow","a","alfa","acos","curveCoords","cos","sin","line","curve","datum","drawRefLine","screenWidth","firstRadius","floor","radius","wave","forEach","strokeWidth","transition","delay","on","nodes","lastRadius","createWave","setup","backgroundWidth","backgroundHeight","createGroup","path","projection","drawMap","url","log","audioset","VisualEffects_VisualEffects","VisualEffects","_this","detach","fetch","then","response","json","setGeodata","Promise","resolve","setupVisuals","element","callback","debouncedCallback","resizeObserver","entries","Array","isArray","entry","contentRect","observe","unobserve","addResizeObserver","resizeSvg","command","show","clipId","hide"],"mappings":"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"},"code":"(this[\"webpackJsonpatpls-player\"]=this[\"webpackJsonpatpls-player\"]||[]).push([[7],{869:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"createVisualEffects\",(function(){return B}));var n=i(15),r=i(16),a=i(30),s=i.n(a),o=i(852),c=i.n(o),u=i(853);var l=i(26),h=i(854);function d(t){return t/450}function v(t){return t/50}function f(t){return t/8}function p(t){var e=d(t),i=v(t);return f(t)+e+i}var y=i(42),g=function(){function t(e){Object(n.a)(this,t),this.el=void 0,this.svg=void 0,this.el=e,this.createSvg(),this.clear()}return Object(r.a)(t,[{key:\"getDimensions\",value:function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:\"setVisible\",value:function(t){this.el.style.display=t?\"block\":\"none\"}},{key:\"createSvg\",value:function(){var t=Object(y.g)(this.el),e=this.getDimensions();return this.svg=t.append(\"svg\").attr(\"width\",e.width).attr(\"height\",e.height).attr(\"viewBox\",\"0 0 \".concat(e.width,\" \").concat(e.height)),this.svg}},{key:\"clear\",value:function(){Object(y.g)(this.el).selectAll(\"*\").remove()}}]),t}();var m=y.f().range([0,360]).domain([0,36]);function w(t,e,i,n,r){var a=r.audio.durationSeconds,s=r.audio.volume,o=r.color,c=t.append(\"g\").attr(\"class\",\"circleGroup\").attr(\"transform\",\"translate(\".concat(i,\", \").concat(n,\")\")),u=c.append(\"g\").attr(\"class\",\"circle\"),l=y.a(),h=function(t,e){return y.e(36).map((function(i,n){return{startAngle:k(m(i)),endAngle:k(m(35===n?i+1:i+2)),innerRadius:0,outerRadius:t/30*e*2}}))}(e,s);u.selectAll(\".outerArcs\").data(h).enter().append(\"path\").attr(\"class\",\"outerArcs\").attr(\"d\",l).style(\"fill\",o).style(\"opacity\",(function(t,e){return.3/36*e}));var d=function(t,e){return y.e(36).map((function(i,n){return{startAngle:k(m(i)),endAngle:k(m(35===n?i+1:i+2)),innerRadius:0,outerRadius:t/30*e}}))}(e,s);u.selectAll(\".innerArcs\").data(d).enter().append(\"path\").attr(\"class\",\"innerArcs\").attr(\"d\",l).style(\"fill\",o).style(\"opacity\",(function(t,e){return 1/36*e})),u.append(\"line\").attr(\"x1\",0).attr(\"y1\",0).attr(\"x2\",0).attr(\"y2\",-(e/30*s+e/350)).style(\"stroke\",o).style(\"stroke-width\",1.5);var v=y.h((function(t){var e=t/1e3%a,i=y.f().range([1,0]).domain([0,a]);u.style(\"transform\",\"rotate(\".concat(-i(e),\"turn)\")),y.g(\".circle\").empty()&&v.stop()}));return c}function k(t){return t*(Math.PI/180)}var b=i(871);function x(t,e,i,n){return b.a().scale(i).center([n.x,n.y]).translate([t/2,e/2])}function C(t,e){return(t/e<2.12?t:2.12*e)/5.9}var A=function(t,e){var i=e[t];i&&(i.remove(),e[t]=null)};function j(t,e){var i=e.width,n=e.height,r=p(i),a=C(i,n-r);if(\"map\"===t.mode){var s=t.geomap;return x(i,n-r,s.scaleFactor*a,s.center)}return function(t,e,i,n){var r=t/e,a=i/n;return function(s){var o=Object(l.a)(s,2),c=o[0],u=o[1];return[r>a?c/i*e*a:c/i*t,r>a?u/n*e:u/n*(t/a)]}}(i,n-r,t.image.size.width,t.image.size.height)}var M=function(){function t(e,i){Object(n.a)(this,t),this.set=e,this.circles=void 0,this.albums=void 0,this.refLines=void 0,this.countries=void 0,this.backgroundContainer=void 0,this.circlesContainer=void 0,this.albumsContainer=void 0,this.refLinesContainer=void 0,this.wavesContainer=void 0,this.display=void 0,this.display=new g(i),this.circles={},this.albums={},this.refLines={}}return Object(r.a)(t,[{key:\"setGeodata\",value:function(t){var e=h.a(t,t.objects.countries);this.countries=e.features.filter((function(t){return\"010\"!==t.id}))}},{key:\"show\",value:function(t){var e=this.set.index.clipById[t];if(e){var i=this.display.getDimensions(),n=i.width,r=j(this.set.visuals,i)(e.position),a=Object(l.a)(r,2),s=a[0],o=a[1],c=w(this.circlesContainer,n,s,o,e);this.circles[t]=c;var u=function(t,e,i){var n=i.trackNum,r=i.resources.cover.small,a=i.country,s=i.color,o=t.append(\"g\"),c=f(e),u=e/300,l=d(e),h=v(e);return o.append(\"svg:image\").attr(\"width\",c).attr(\"height\",c).attr(\"x\",n*c).attr(\"y\",0).style(\"stroke\",\"white\").attr(\"xlink:href\",r),o.append(\"rect\").attr(\"width\",c).attr(\"height\",h).attr(\"x\",n*c).attr(\"y\",c+l).style(\"fill\",s),function(t,e){var i=document.getElementById(e);if(i)for(var n=i.getBBox().width,r=t.text();n>c-2*u&&r.length>0;)r=r.slice(0,-1),t.text(r+\"...\"),n=i.getBBox().width}(o.append(\"text\").attr(\"id\",\"countryText\"+n).attr(\"x\",n*c+u).attr(\"y\",c+l+h/2).attr(\"dy\",\"0.35em\").style(\"font-size\",\"1.1vw\").text(a),\"countryText\"+n),o}(this.albumsContainer,n,e);this.albums[t]=u;var h=function(t,e,i,n,r){var a=f(e)*(r.trackNum+.5),s=i,o=n,c=Math.sqrt(Math.pow(s-a,2)+Math.pow(o-0,2)),u=c/10,l=Math.acos((o-0)/c),h=[{x:a,y:0},{x:a+(s-a)/2+u*Math.cos(Math.PI-l),y:0+(o-0)/2+u*Math.sin(Math.PI-l)},{x:s,y:o}],d=y.d().x((function(t){return t.x})).y((function(t){return t.y})).curve(y.b);return t.append(\"path\").datum(h).attr(\"d\",d).style(\"stroke\",r.color).style(\"stroke-dasharray\",\"2, 3\").style(\"fill\",\"none\").style(\"stroke-width\",2)}(this.refLinesContainer,n,s,o,e);this.refLines[t]=h,function(t,e,i,n,r,a){var s=Math.floor(e/30*a),o=y.e(s,150),c=t.append(\"circle\").attr(\"cx\",i).attr(\"cy\",n).attr(\"r\",0).style(\"fill\",\"none\").style(\"stroke\",r);o.forEach((function(t,e){var i=2-2*t/150;c.transition().duration(20).delay(20*e).attr(\"r\",t).style(\"stroke-width\",i).on(\"end\",(function(e,i,n){149===t&&n[i].remove()}))}))}(this.wavesContainer,n,s,o,e)}}},{key:\"hide\",value:function(t){A(t,this.circles),A(t,this.albums),A(t,this.refLines)}},{key:\"resizeSvg\",value:function(t,e){this.setup()}},{key:\"setup\",value:function(){this.display.clear(),this.display.createSvg();var t,e,i,n,r=this.display.getDimensions(),a=r.width,s=p(a),o=r.height-s,c=this.display.svg;this.backgroundContainer=O(c,\"background\",s),this.albumsContainer=O(c,\"albums\",0),this.refLinesContainer=O(c,\"refLines\",s),this.circlesContainer=O(c,\"circles\",s),this.wavesContainer=O(c,\"waves\",s),\"map\"===this.set.visuals.mode?this.countries&&function(t,e,i,n,r){var a=r.geomap.scaleFactor,s=r.geomap.center,o=x(i,n,C(i,n)*a,s),c=y.c().projection(o);t.selectAll(\".countries\").data(e).enter().append(\"path\").attr(\"id\",(function(t){return\"country\".concat(t.id)})).attr(\"class\",\"countries\").attr(\"d\",c).style(\"stroke\",\"#2c2c2c\").style(\"stroke-width\",.5).style(\"fill\",\"#888888\")}(this.backgroundContainer,this.countries,a,o,this.set.visuals):(t=this.backgroundContainer,e=a,i=o,n=this.set.visuals.image.url,t.append(\"svg:image\").attr(\"xlink:href\",n).attr(\"x\",0).attr(\"y\",0).attr(\"width\",e).attr(\"height\",i).attr(\"preserveAspectRatio\",\"xMinYMin meet\"))}}]),t}();function O(t,e,i){return t.append(\"g\").attr(\"id\",e).attr(\"transform\",\"translate(0, \".concat(i,\")\"))}var L=s()(\"atpls:visuals\");function B(t){return new I(t)}var I=function(){function t(e){Object(n.a)(this,t),this.audioset=e,this.visuals=void 0}return Object(r.a)(t,[{key:\"attach\",value:function(t){var e=this;this.detach(),this.visuals=new M(this.audioset,t),function(t,e){return\"map\"===t.visuals.mode?(i=t.visuals.geomap.url,L(\"Geomap url %s\",i),fetch(i).then((function(t){return t.json()}))).then((function(t){return e.setGeodata(t)})).then((function(){return e})):(e.setup(),Promise.resolve(e));var i}(this.audioset,this.visuals);this.detach=function(t,e){var i=c()(e,250),n=new u.a((function(t){if(Array.isArray(t)&&t.length){var e=t[0],n=e.contentRect.width,r=e.contentRect.height;i(n,r)}}));return n.observe(t),function(){return n.unobserve(t)}}(t,(function(t,i){e.visuals&&e.visuals.resizeSvg(t,i)}))}},{key:\"detach\",value:function(){}},{key:\"run\",value:function(t){if(this.visuals)switch(t.command){case\"startClip\":return this.visuals.show(t.clipId);case\"stopClip\":return this.visuals.hide(t.clipId)}}}]),t}()}}]);","extractedComments":[]}